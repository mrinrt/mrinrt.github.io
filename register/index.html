<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"51bad45f7d861c5379fea04de9cdaa04a67daf0ff0bf68b34945e68b0f77ded2e4eadd7766c16a6346635cae22d17ed94c29577650fee46a7c4affff3325a718d820c1ca1ab21fb6a5ed7a6109ad234d10a1e587a5bf00ce0b13012a3e8e4dd6cfbd1b1790a264994ae52d06196ae633bc375f63ada556b4cbbf0101529ad5b7286635799c077c7db661f2910530253befd77460c153299dfa51ee33783c37e89e6adfe2a7de9a144c823abe2c0e2854f1ce0ffe453f7a608a80a940d9ad09e20341020e82537e100d2127fdf9d8e9c5340d7cceeeab3653626236a86c61e56ff3537498533e084338619e438e069f1ed2da99355b6c7d509c5b8fe63663254c144bab3a45a256e59f74592be860c8ddc641bf1817d062524cb70655862f376ade76bfe5aea5abdc85ffdb9e957cb845c5950d16319ba6505363c6d6214092157be8e3edeed227afaeebe79b4e05e16b3fa414924e6c4e2841e703f5bc1efcc848144c5ee4d01f98a08690d9c342e7827e8e6d97e16ca093ae2e0dae04551070ab4b4cee7105c725a8b2984f9777bd37ad99b3b850a8fa64ce84be861c1848800ad8f20af7341eff29961e9ff93cd7909003df35a1525f9f741c6003f311787830d6c189e483c46a87348a70f48c5e112338fdf8f8bdb03b3ec71a8d079e1bae165ecbef77844f329f0926bae1d4f30572647928ae22da26f3cd5e6e0d2d67fa237366acf3e861a635de00ab482412d215fc8ce77d1e26d37980ffffb242267c3c18bd2ee186de70bcd85dc0cefd6d9829ae6a7530f612cd121a24253069f5e5c395898040c697dfb64ba432e79384a02492fafe112d2f563088751807c5da6bcd549b9f930360b035492d4087f2d42a23ddf0d9bea2c594748bc87fcd2c8d531c9dc333e284174227d86d4dffb2277ac0acc46d1fe465d047b656b561bc8f7947dbf1cdc1bb50669b8d83de510bf8dd981b32afeb7e207eca82db6dec4dd23d59755115230b3a68f314a247ad24815f3530b757cb731cd874dc53adba47eaaa045ecd855d325595d5f83a711bf9bed07451e33566cebbb21c72ac2b57faf5b32c8510437a53bac7abda4ca8e5bcf925fbb9cc0b695225a1ed97cd1af4ece3bdb4f11f47b68c9c8d36ea5e9baf13a46be3d048e8c7877baf9a6d1fdb99585c40b196c28d8b7eb2118df9216cca573f67b61159ce999d19165a17949ea176d38a0f1841a23da7733631483537e10b66571e0a76a81801c007b7b681b969e56cd40f649927f86289355142259d1480bc160c8a6fb5bd76fc037d4684a154b4ede13e130e574978ade74ca7ff6b16c988d21f8d09631a3de8a2ad8ffc61389c6ab414a154ccd3877befc02b2234a04e419ef61fa56308530e64b9d7165e85d4fd678e851a6c0a176aaf9ec4a18f0adc8cf16090c4716b78bf446bd4a30e518873ecc712e0c022f7713a9851f76d01162003aded94ae2892569a362d87e783a2ffff5e19b8941c5c68f2ea2855b6531d3d8dc765ce57834eb781629a06c75da84855f8618e65293fe8d65cc6d178de1e3afbbfc59d14dd7db24a96ce100e51175fc0bc461bc60f327477471c711460f741f846ef4c129441919684f51490b6d763ed2031ed45d4e408a0c57f82956ec86a1b3cb9bd923d689df3f26bc5b3e0b95e27aa2f0a4af62e0db0113793aa55db5a56062db47fddd1f72a53376bdaefdeea28a842b1664824093e6c2d324e5b84ea43bd1e97e7944ef114e3eb6536035b449d5afb40eb49713b6cb0e48d6ef9e7055dff747ca90ed7a5a525769f6921fcc81be19a7064b59fa1994d3a84147f8e06e936c538c1da9f286f38d2d5c7d3de449dde332d4d5e46bf56fffb2ec2cf291189a22c60fffce3b7b8d207c8fec7c8ac4fa747b77bce058a715b794831be3635984da8ea7841c69eece43e2e08fbb8fe1dfa660790728d4ada955b2479c686d7d407f9190074d9aad4b30d3216b727537f40198776633160e62eebb7fb1f30e1244f230c79bbe51b1a6f25ec0e130843afb1dbfa2d86aacb9cb4bf4dfb0948bf91a9ca13b016187f4be696489807d5586c3078f1f6f9e5d976dae7283f74d3616fecf29ebe676fecbc217a53b7950bcf6b563693d82a0fa21bd3b8f3f40b32d753825c622e324f87661d5102ccf11cbb9993e3bd1e8b372d87d45e501d0a5cac7cf050e7036086ddecf55989b476f9cfb35cc17207132574e598d9df3a26537e5c751501f362bab040f169c86d482d4571951ca00b6ac1d13101b3015705abe024c532cad6cf0bbe5483da078bc296b71baf92ae3681309dfe5c519225dce89094902c7f289f7883534faeeea3e8be54c5a61b5a5d7be7c74cf6fdaa14097007280dd3b9ef5e6013a2fd99969db378baf5cc6c12ad5c59f41821704761b5dcf449a6b4dc2f35405162d6ed16bbb7daee67ba37b66352c4d04de8fb10de0040064c0b9c2735f604937e936d468c2637ae532bfa2d72f90f51e8920c139cd62fd5796e4bd9bb06c34e95afbf5f7220adc1301b4640ff05d227a221ce309a84963554bbcdd565660e93eac2e67f3d5c90ea26bf4d8152e4af79d013bea70c449978e8fe7857301c8dcc8ccfa904fabe126040032910b192404935ccced6263f53f618b8f021c2be36efbbe2c8d1887f4f6a40eb58105ca31f954ec1d9cf01b851eb93e59b138c13644ddfde098a03d7881cd85315812fa083da137e7d0af4ec39f5bbbf35bd294f098e74c79797bded62755bc091c0fd7d4a9c8976838c104d4bf36eb06315caae9899ba642e18845ea991b7f93e98e6e8b778821457f1303689ddd5ee6613bcfcce6500038aba1c9c1be96e975e024e31653710ee96669296319638f0bc880317eaed0554fb2881881b4cc10e8f4ede6c9d5c0901bfbb98e7b61c826071de57f6510e25bb4bf36cd11a904df965a9cbb05c20f2685add6239d8e1170c737a3c2ee17c907f7573a414df947b485720bf4f647cc838c306fda1b54853a6724b30ab422b869f8e91c68abf210377912d3aade1a15c2916deab418c7d75d82d96429e5d15942682283705489cd99591a40160c0c71eb5942be6567654bed4505a3ca381394f387f2cc63bd2527e75e87e9e437380db63c0766addcb2195129cce8e10c1eb4a7c86ae2e5e1b288fc4e93a135bf8eb5fc7082a1ffadd0bbe8cc82ea90f9ae44b9446abac424326b3ea3fdb32b999af700f18ed9e7e1d7fefbfdbf46e28fbe9eeda4f0e78579005b899e81b77090b5d2d91df769de5701a35e0b5257d4906844cd3251ca036875f4a44657088902f2c56599204da18aefefc9072b32a5ded0f85c3e6a00ef28c0e5c2ec3864988db85710df6a5932fc0f99febfbdb5d4276f363d22f50ebfcbd999ab0c64f3596f8c70dd92b16d59bf69b7121e621f4c1a6b852676f7077d41a07bdb86240ed54024702efaa2fa489aa1a8a17615a72edfb314f5920b5dcdceebe32f40be50ce3c4009315839e4dfd0c7ea37752f23363df9a9ad03804d8e89cba4fa05d1408667062ee3eb5dddbd07c0d1e2e60716c45771ebe86e6c5c25c1c550843eceebb0c710b4b532c29cf0598d4a3c3a1055f6efcdb7d3241226771061b9fe3ebf26ed96733bff90544276727d3820dc756eeff05c67e6a831d0f66eb3b8242c023367765b9772b4335712a2a0997d499d8a861b38b95fcb15ffd3165ffaf2d8d3e41d1a180cd041337e24c0909946675f5d55f80a2408119b6f22bd2e52aba6dee96ad4cc051b83d220ab3674a6bb580fd2439794c94a4b368bbfa60c2a5f9d6601ea42c9abf755606f846f31ce9084d400539f5a64c39b2a896c4b76d021d2eca6196e09b71eccaa0b786eefadbe142eb56671cb42b21362c592ee3b9050811fe8f3fd6ddaa327aa44fad6491c97b53c391e3392dec7c1e4322943bbb308526b556de4da2beaced817bf05fd8730b6ad3073789a08eab1999700ff7a078b7aadd6bc8ca83a38040956abb32d80a771fb751be09faf842661c3a72a4b31f9b29f9a741c9e4779b5dffa1c44a7a926f4da55055e079fa61f25fc1a1d51d2985de5d097d36a8cd7713877933146df2a03473a156b2a1a02af862d9eefd02b7249fb5669fbbe6bc28e1406602ca26c7f3488bf14972d58456443fb496e95ebdcd9e0bcf4cb238917757a5fc0cbda294c8bcd5b023849e5aa8702086281d567fec6f3853f473005cc4c62e49d9239201c15d6f99314e075dac90c92bb1c58548c9dfb67a0103b6f3220916de8946d635e447a5aedc964cf39a5fe2425c5e5e32f74467075b8c61744161a12fde43049ee1f8d2fb17c6209714f1bffc9b404bf17e6cac0af9277a7dba8f15f767e8229148b36f0ba0abe274902e87b2c10fc76dcc7bdbd83bc9c027addb21497b17c05d10c29cad069cc4bfe93e0ba868ef4ecd2e3471b3a341a81a5548252ec94fda0556b849b8828ead043d47fe7742e223e780fdcd716aa3c4c1a4aab1d91b54570a54e06f9e04fedd65e2db72bc56e82a6b5a3fcc6b00c31be8e03f7532b021ca0ceb4447e92fa50cb6cd481a3029e6e965b357197dd7c64f96ccf506b10037a71d93e54df7db12991a87ae80286ddfd74038d323cf3446172cf7dfa28d392b8a893819da8d1127a6d80c30895a779f03996a4c9114407600d9fe74bfee5665dfed8ce8f1ddfb296e5483649ec93be8a9aa85346bc2cbce84a0ef0de335601b73afa179d3b344da3f16a12355d9f34301876586e3234b62520677d5b547941f6f69029063f29c1f925f9536cba9cf1b9ea7fdbcad6aaaeca967f7ba9fb1dbaab4b3d21738281eb019c8950c903c770c1327bf75f2c96a990c754c0e41bd35cea295b5d3a7310eda9272a28f3bb00e7421ef8627459432767d25112e0de19096130e8dec4a7fbf05c01afa2cc7ca37c89ca594f8afc5e2e84adbc3f59f5e62852b56f09e2f8b6212d8a752ced37f21dc54e5125d1341f1731bb222c531e765580c17099987f038a9ee594358ec83f8ffa3ab41c7cae0bb2dd6fd81b70e46dc90da75b3be8b0a7bbf4512d7b857242a5af1059c7b2a68a970508df6fef2c812a149ae3aa027b9fbfa4b1bbaca5638cb82ef7cd5d940689d594999fb72b966770e7cecaaf4fa827d23ed47d130a677ea5ffae19f6d9ff1e1dac9604ff9a7cee42ec97d87c8b8a4627ebb1ac9c24b067d241eb632bd44d80b994217a81104b5feb9ad901188ac3ef4669ac3e165b57259960eae1a53d81ab4eb2d42b46bd19021780ea568578dc22290cf50ff9e8890b8ffc01b117ce58865e8495c0b61652449de21457a5ca33a724e4577b0b5f91aa2ee18d0866140c6ba7547d8d05d1a0cb7b713b8e5593c714d3ba675a998931c5b214b193109d1fc3a36a9f871defbc8aae4b494a87a37d3e2d4714abc902178ff6f921ffb587aaf838ed2f451fb4c0d0d6de73fd565d19acf1fe557c1b3faa91e71651749cc0df38f3ba018f97ee55b962929125343c11b6e39575648d7f83692f65d5df622bc41fa56ff278d3adcb21e5363377c2dfb580325d67d15b56068653d23763300e03f489120cc9b8234f7215ed38bc031882588f60705b0501b18b8a0477bae2e94f7812e002055b9f589fc020b7bec76c63d0bdfb47a15f34bd88830fc2c2bbc3319e6dd18f667c81c92bfc7a8b53f8e876f21acf117eea81b0b82492b80d24c2b44dc59a9815e876464c3a9e5f6952437fc706ac4fa4749aa593d0daec5a1871033ab29764664ff0b6e9d65ae02ecc0335fb4daf80526960af65aeda77ec6a9dcb3eec7120a3392bbe58fa82810f8c3f1e2ae4212e9e476a62aea94bb6a82a1f3cbcdb4aca2b2d57074174129fcfb7e317b3e4db408cdf69bab68e00054847a9eb323d538b0ddabc9fc5a061cff79baa318ea68f5fdcb154f0f9e3651969041612001eb78702668460add3134aebe7641d9a7f04c2ea06aebfb29a90120d91eea22f21c90f66f4946e78b64997da917c422f86cff1fb0f08852bf477b7f75cebb168195a80f4b46be7cb1ae4c4d2d9c4e21657829030bf023ef6f9bfa33762f79cc496e792e5d3ddca4807aeb35ecb5c6c90e888db46c99fb44facc3e86f0d645233dc5fd7aa998216c76b695cf0c0102cb83decaf73460a18af9e2f4256757f12ad83a11e2c1439baf3e2e3c200b1ead0bd6333c7e19daf9324f65fb789fc24e7b7e5fb9f94b14462eec18b7805c1494f12bfc068c1f4633ab2c0be02fafbba52d1cb2ea38df2a9a3a3622dbcb30a37f7e7a6df6a43ce8ef50d80fb8284f573c7c707afedf8be18949ef48894f8b520045dc05c841abf4274ae88c9b8861dbfd22f8b0c6156b3e10c6930daf556e07d0639bcfb5cfcb17fd99f145eace593ab03101949786c77c0b069ee4d8bbe9b422c602ffaa68788c99eaf4e36207e006b06f4a4eb0539c1207dd1dc80e0df1ba2cb3c5fcc9b47cbc2441e0a94c4bdfadf20b7244699703769c589c0627cfd6575efed304afd450d23c6dc966290f6bb6a7e3dce50c353ef2e62ad94a33e43f04c2df8eaec92eb19916c0135fadfd7d3f673b8632564537fc7c7b3805ec897202f3de228575a02246b2f5fec64c949f33834d72aa6965f6a0c6b7f269deecf42919d115ce3361bc7b38a9613c3a836dac6a0ecbde0564aa0f64d8a65613af71119e3ac099b090c5894a5077bf2a7161fddb9c97c4c8210fabe60cff2c77f3a2a33cc214e83c60769d3676c45110ee31e85d87078868663ffe79b348a778546cf5d1d59c9b4c4d33901cc8a4e548b01155408b1b34cbdd334d150aea1528096fbf268dbfe60125ed36aaa609d5cab740494bcfbfe24df3241526ac173e92a2dfa339472898157aa6b1aa2bdaa947c356d3561f7fe03160f89dd964f2689b6b7da4e232ed1ec741a895db9222a61f449a79d3dbaa7aa8195577298b52973f128c9282348e4f0a78a05462178d021804f8d90b2084eb156b1d780b76b792dc18ef24f012a7470d52ef5bacf571b5b3c047b7efa8443d507fcc45ec5929efeb0410b3c947586cabaa2cc311698d6be9f8c701381925c34347e3606d205130f734bd35b6a21d7dd6ae0ec098645857b99c6be4e3dbb0b2458babbbe050bbe71fece974c7d73cfb8ca683fb81c1f2b52fb1f1be64022c8acd25168e803333ff453be7eff3e1d2477253051c35e1c9448adc602410da5e6fc8ad5e154048e3c2df82e55f258d720cc00c0e6cb27f2b57c9796b106358d230f43ab6b28f1485c947cb4fb71303c35a93d93cb0aa887068826f9f8b5c1319794760ce3a5ccaa80c8ad92423f3dd700ec6a367d2bef848ec78efc7eb8f9e25455ff68b632cd5b3aab8316d4b1939f58001b9d60c2c22de6a492e78ddc98714e95d307c6b27073ace19f5e493a4dbaa1c07d0f2cb59a45005a2782d2300f89bda56a4668c8b125297cd81d9c5aa72687a64d9133698de000b74e103f2876b430ff2b850209fc37e692451eb73a6189795fc9b9d915e528ff349e51eb97ae346fd741282f43a425b51d13f8eb7a7e350a55bd2805d7680332a88e7ef5efa9ab4f9aab9f08e031d15cbeb0b71fb072b5431dd42adbcc2cc1185b41a7e918cb854a6fdbbaac4baa6f3eee4d707c218ed5676c2a0565090837dc77bddbbb4783ba32aaa0229a20dc6eb31ebf925ac366b9df5a65dd674784a2297ae74ef2cdb304dead8b34590f9a1e137f1d9255b6cd0641e727e30bde30c9e5b4a6b549654158558d9cfb3a84e5e019aa1e0114bf0f7183f7e504097f9d14680576be03aec407eba8af9ddcbc038167854acf08f4d14e6cf20efdb54963d5f367199be8ea5634468d6dc44a2896592f06dfeb6c34b7197fd091d4a5a51a5b2e62bef5ed3e26f7ae78af84b883c095ce72dcd3bc0ff7d23eb12cc142f792e98680bf22fdb32f1c9408dd7b516e511d9994893736cb31592857befbbedf748b92f7e16a32bf793a2a964b75a6f8f5d3729e096cb39ddd7eadefc1c88d349f7cec123cf1e5422f2b7546d9d1b3151cd6ba18fa8a0085399bc2bb36c02bb6ef4eaf2511269a79879e79639ed245328d0dd35c621e47870ab06f8a325d67ed2e097bc06af31f64cc2630f0da3343b45961822168b73d37246c34662894152f95ecd3f163cad4a2d01a9177bbf4ec382f309db3272c20e76b3819cb76cd8044da1aa8c8802740c5f3151f4fcc9133d5c703a71d83db6e5e5c87575ae2b1659988be7142b3768a6f99f04dabec57c1e0be74a84359af2e5b9706e5d0e4ad1f64fd2dd5364af51706eb3687d24e89d23df8a95459737a0c1ae3b82c767e1247c6ff9225a3221c66790f8ff1125fc25471681490de76124e281d55e217440f66b066b7f0b6896bf3d48bc0e5a747bf620aa9a263f309af142fa3e91926bed9644a9cd4c4625f0df51caa915476946b4013aec4ec318541634eb37a97a04b9517971be79a29a1b669ea5ccbcef42380409f52f62b8471acb224e9ac5e6d2c46859570214bb5dbe310066e8cdaaf753ce1444c4d34362f726d046521bf7c6b01ab17006fa7206f31abc7e22a3a8939bfb3ff1d7539d59566411da4f3f6223e15e80a1b6fe9661bf081cd725be8b3a3dd5399431acf8a8d79fe347010cb35698e3aac32cdddd12ac294497bdd7990b0d18e55a0921e0ad4cf70d5b7d3535143b1e448303fd685fb851795543c9ae73c043af934251f463049608c896462f5ce6be4374e857a4b0109e3b7c47b04fac96eab2125df2dc587d3be6059bc19424dcb74cdb02db972a41fe56b6a7da9ef91c7ed2287ab06adef9ebd40705995216d62a66980e67e72555aa9aea9c1822a1a43ddd2e7bb121d17d54a2e8e8a58c08dac80687dc26620d60617fd9e246dcfe0a61ce9bbfcc040266c7f01cab4c3b1ceb7973e356a3de21292725b8d599947d2bc102515962c1adc1aa0b2497d8ea9e88a8208b53350c99cfb29763d48156013bfc34e0b976136c1a71d554dfd6d82944c5cbf107a825ed14f9bbcdc5d71929617b50afde86d4d548bc904a088584e2f1dd88b608152384861fc86789512b75d5f9a91dd51b53b10429f06a8718576469f647f73338c46eb4955952100238397a3d44db2d5dd93956f34718930a7aff0ba3be66558e2865273fba282859ec63b8cd709d804005cf1b77f65fcbb0fe771936b0d4925dfd6b380b68e3230d59903f8a43363f46d5203da99f0ee2d3f406881842793e9206e079fafc24c2287a96f99c2db9ee665d72cc9aefaefda81f3344965aa0ac0ac348eaa8377f20015136766b670fbb4a0f029589037de2d7b2421b3716424aefa032cd457d8cba81c91e07af93adde48d355e30ae610b07dfc5d42d65daf158892407d163a551cf42901fe2634580dfbafe857902acce1b25361e925ba47e2782dc9161c3bd50a4f77431cc064546d101af8d150359ad22fd1d0a647d39a71cb6e4896b8b21b978673982285c93222964630ded0f4c685e4b41af4f6826f0b257bedd8f6908f73a7243def0822d82bb84cdbca5fe8fa3a706fa7cdec67832b62f31a5ff9bcdaaccc5a1e8f240a8ea01dc983e24376cd1eed83e6af5b222453f9fcc8a9e4ec5136e0176d960121b4c7445372cfbdc7c94776d8b6ebf17e0e5697deb14be46a4cb87c23713c9d55d15e4dcc668112f3ab10f00a13a90c17fb27d7a25c7bd21971f3512d9e8e10d4070d2ef6abca1ff78f9393635f1f0871b47f6035eb0950aaadba8f72560416ae591b7f81faeb1a5b23f85b27a2201ba3e5d0177141978b671deafdfb7947e73cf17b794f7805c7192ccccd81e805bb96dd3b6aeaeb7fb9f07b932849959353e2e72fc92cff50a0925257ab961e8c7d1296c7e5dafbd4b1335d3554199aebbdd06b09ee0b2bf2d11aee783680250b030151849990dff3b5d292c1a3c977a9b06dca6c7594ec9ee7a78f883d2456f09c8a3ddc85985ff5e8e016805c1d3a250d8df7a9d65cb18e71477f00d6e787ae1fe8b9510439cad8098d8897e47d2702d1b021280a2b402885238ac90a4ab7631c15cf89538060462872583660a4c43a3278adfee570f0a06d3eb07dd546a70e064c7ae66deb51ac87979eafd402e8e07d544dca0a90f0db90fde1ec8340137e569929d2126a6eb495c9129a936e4d80d3c0dc4cfee40bb6b9f3bf3d93fd227785a50b0151a0bea3913438d28133dec554226bd946854d47bcb6efc34c98047b8186276eb9a406534230646d52222e59575d049b2d0372d4abfa19ccb6cd46ae79a861f0ddc74b2515ee9ff17a448e69360cfd1d42b6d42c7ab6bee00f3dece064d8bbe3bfa58099648c9853b2f9f0adc624167b6624cbd16b95434b84885e99b1fb16202f807a967518db7e3c40f4c8011eed39285f032b00725aa558f6cf34134ac9565d31ceb04f23e733319138684661fc9502e60bdcf0937e6868b814dff0afb402bc05ee664138b7b047a0c8ba76f207232918cb480277d47cb9d4f300384000f981148eb09465555c8e171afefc39d42e1ee2df9199990ade7bdfa225821dd2305d28b43fcb4a6e862e02af94efd6eb1e739b8caf6d250ce18d418eb53e74efe1574893fa2a574f743e26d82ee74ccd69cd4784697858444702c040fe10fe885304f2c392f9ddb6927108b383e3630e8a2fba8dfce0c0c263296ee6108906d3ae25bc24c4382e5078a52f5ffeb7e07a96f71f8fa0d80dd19ef1315d08f749f037a71d7d64fc662cc4a04c2ccc980a15c6110cab950fb16386155cbd36053e3b62009d5f847a84481791b9d8c159fae9f0f6c5ac93fde1c04ef9d8d8eb1640ad7abc3417d4919044c3bc5265fa7feb50cac696fdd9d6896bf847cceeb0de6cfae5cafb700464ac3ec285f3394e990e00a22d037442bf3b0fcf9ff1c2c6a85652aa8c89c893b433379ef5b9317a4f088e58467b744ee0849cfad7e5c4db52df88872590963dddef3cc7a69b83100e57b6fdb5a21a27e3e13a42183089aa270d81cd2a26944776610ed0e6382da19cc03a333f45cbd06ed6948d006f0f9fdec9dac9067af39e6b77ce80e7a3af3308642f268b64bb33c96f2ac6fda3b84edb7d6965c8b4a3c4f05ad78e6751f506205f2a83daf512c9525b0e43967fc86e8c7ab7f96af530809de41db8fd97f2a2b42dfbda65a363e42f2793c71c9d1c807cec1f23d6735d1ec06f5026e07cc8a14c6183d6228c93fdd245f2ec031b1f9d1eb074eb1c8c1844f49925ac0dc7e5c5c95dfd1561c2ba3d7ef01167d486af54d53a6b8ea318e62ee65993ed6d9b21b3ea2e4f01939fddf3b1a1b78254090f73782887e71dd5f685c6b2f43756d92cc36d59479dfe49ef1bcc51ceb217eb3c72a9bb2d1630f60db2dc6238d8b4565771a32a22e0f32b206bafee0017fcfa1177ef2aa000734f27621bf3530270bf4a2f2c2d9fcf9096c71679a77d2556ac18cc1312121f98478dc5a3c190cd0d3d9cc1569feea176a57067bd350f960142f2c177ab1d2d470913d45d532dbe8054d616ed3bd9412abc26c7b67742c1e768bf45af8a60e8cfd618dce82c2e17ff830ce76fdf05defe80e2302d323cc318632ffde5d45055c4b8bb4ba034481cfba25cc910365f3339af6de94d3c6d1df55361cee09e6921eded4043e1f8bb0c36f77f8ceafebf457f1e471cd663d1ac1a3a40dc05fe4bdf8b007b8a5338239b3388c3e620f6e334982571deda90272903c832b8a987818404ef450e037f09a2cd76ce5b9cce1a2eb4dee8a834849f18591910d51237c35c4ea6464d99e65dbd34d28782cf21301cec907988ce5e89ac840fa9accec9f51b3ab421ad063b76014a9b3f1c32eeb66c98c2c4c43ebb4be858b0e427f8a95109fa1e7af670e00847412494c8a97992d596873a6971897eda54f9011efd3eedb81c997803798e79171cfeb34252ee63e48b6e7d887fe2424d27fa3c50e97d2c7ea986fa839b32a9fff85350c07b53ed39b6d9b509d2fec54b1088a9656f9ade13a7a229fc712097a9801bb2e79d5958834f2481c07e4b2c41707589ebec487454fc41d0807e3ecf54bb0a30a939651f87dd41b182d8e7ac78d9905a0a64e0608c5068c7687135161bc15312d48dec098dbb4efaf4b7f592fdc978804a5ba5399d54256172a9e3ffeb30a5997f723a582c37184279f82bd58e3b38575c0036539a388c6386fcd3512a2518389e5c3ce56cc8f618263700bafad75cdc4fc5a62f80e796b382c1aabb813ce832a1391336731829884a7ba139180cff803b2b5074d6af539e22e2dbefb68e0aba65f57bf5cf5c8700920fb74ee9bd65a393820650b39b8fe896f4ab3a46005e628d13ae2c55fdf7c5611f8b708c1dcf8bbd13a02df2284c6fbb96f7a0bd68a94db2aa6515b396536af8106dedcee5e6286eea52b73946517e738d77177e05f3661417a6c1f4187274c6340ca0a45c51733179a0e52020277491874bd9e3f84b2b7166a82b5c4fa22a54195ba1d64f4fa0c492af9cf5b1f68333f1f4ab4e3eb5c5016eb4edc102c6156a0540422a8c33079671268582865cd99965da9977e232f6d8737d6a36cf3504ff0a0f24b3ff8d599c30bdb918f1d31b1ee5014e661c8e75ab2b168f187e9d05f97c3ec8145bcc55a74e6e2944477e06bb0dbd256fbb85bca14e2653115921a5b425c89735d96186381449ce1194e2ff64bae77a270d7195b40003a230a0ab75fc3a5ce07e96b695154b48db824c68d84553742856496217e781c9b8c45ae1540c050db5f14df7f9f307853f9f81c487f43ecf73d867eaf1bcaf0b047bafd4e99ef9e69d421ac82566226c5766bc59f3e967cd8b90709ce9a4a67d78bb351aa5e5b695851db3f461157e19c5ca8c2ab753a88236c673b95e062d2921973e6c60b34744f3042021147a983bcf48512e9901ed923b3ed70e9c4739da37316f0db15e52dad77d2f00396ea607243ae55d25108240fc1e2bb5bc3d3c0e853525dea45563143db203f6c6a2b07acaef0d86e3a7c4d63e3994c7103e6515b3f9656a8dc53dcf84c9dad7bb9aacd01b571adb927a50b3a08dda66c60a851664198505d853f70956d40a4523831c55ee2e17b38b48d4cbd886b17ca1128b738264cbf58246021edcd206c5f5f1b06fcd226a207d4a677fcc453a204e23cda783d0a55e2b15e1dbacafc97d4fdaaf64f971c3651d6da5a84e9b101c9795b6510e015045d2d593c3066f3b489ea7516b4d37b96fb031ce444326a49973dedae47b308b9c59c1e7d0917341fc031edc6042cae27c8fca5dbb3505a9f62d6284e6205a95839cfb016d48fbe530264d2eb9890ac7e04fd5d5dd5a983ff18910eaefdca77507f3517a91cb7e3a2072ea78d01d137670e8197cb1d1409dac37c2cd0ba5b6ba103d46c08a34ab324be9d851273ff37914ab63458f45c9f84e5fcdcc01f0f14000f1e217d8f5af10c03a49fd304216cc641fd29611e0e3ec35214f058f73a5b85457906dde93102555ba89b8f7746ddd129a40bf99742eeb7e73e2eb717cc5e096526e68ed059ff8c512db811d13243ba248259a1fd18e0e7b875e6b5dd37f6efc4bfe06526775ae233a24dc16a2c4b27dd4c5c5a88d3202142e5a3b95278187b65c19a20572d559dba7b5807d4fa47a17e5ccb4d453e2277053eb7f6cd7fd65f2720a96ae4d59a9a94698b0b28ef8cc6eb95e747e63b0b689262763055052d523d07e1d316dffafeea3e7558a06131450f64244ec558cefc1756d9a3d78c3800e471f4533a01d50b171658aa62c8dd68afd6ad134c18cc167b8bd5d3f42f224441ffe819d4a075d55e407bf329e77872b37b206747d8c05069b3838311fd44b16f489ed5245f1356013081e903fe3f37b0cad6dd6e4f926eb6af0bd79269f0d6874d8659a8c6601262e04c8ded897715302487fe3bab710d52b2e286f53ffa944b4243033b4e30360223e1de8cd07b5df0abd9b5ee012eb1913fa0a635198b877b9ef280191f57a066ccbc40cb9e724f61e84fe1cb93fe1b97f797b32cf127d1701d34154aa0405a08f3a6ad1df9055a3e6ae72997df9f3f8bfd44c60cf13a3537a5a5ff450faefbab42dd4bf55237590aa5b5f3ba863678e221a8139790c73b4946707d68d6ac26197ab93a0adc59af11c22c1f2f4826397165e60af79f2b557b3a9d068d25083346814f963b865fe60cec694ff6172971550ff6aa1ba03ed2b27d45fcb072e3506b39d63e94996f80bc9efc295a6883caeb0247fba911e13c166dc5f15c254a4b23ff66f0a9d15b5e785b63fde98fd78556008e1ebbf40fd10b95597d91fdcc5cf976d8086740c027a5a42ec3801de11db7935f31058e47adcff54cca53fde92d8d5bd16ba8ad542b5cbebe4ee5251f7073ed45aaf0237c5e13f1f3a6236961244bebd43e4b48366a98313c282564df8fdcb6635d236095f976824b4e64a640508c4d7b0fcd30bc45c40824e7c1d5a42aa2812ee291e6785f4021bd4c43482d5aeefab8ba0b526e78161b03dc0505dce5a74f267969cd5162efbe4c5cad1e751c1feae972d8ccaf482ba98ed1346efacdcf4ff0d2ecd17302c3e36a84b052abec88bb8b57e623cc67ec1a2e651413c71157f5e3c011916c7c345f7ef5e45ad2cad1c0e468606e8554eec7f08bfcfb4df57842da8e7099e5076fe65fb3ecfde1a72d9c7e31013129b231ad4f9b784c0baeb628f1138a6bd9c7b9b6edba695753b2a81143c078354ca661b9bc90947c83de125b7a7ccaa394fae1f6e35720abd349cab2745c98f775e82ba71b374489e97b43e883e6c8b9c5f7915b1e040ee1364c620a9b04d28aa3a9faa4b18673255a675449eb681e5a8fb97ee7a60c8797b9035ade4c489326c2472bc55aefb283e54b95c197003006e0ef37a5c2a9b7928cef1827479d41d67caf7ce4e221e35340673e9d375184edd738e26dc50e0bab2ab4c930db201fddc10ae70483be5b435a134f8251089c6a9a6ffe9b3a6c302cf5ce6cd12fbdf1e183df24f8b2826dfe92f2427ca3a458be3f3baec568f6e081d34a42c4e93da6aef00a5d793425795f914d109eed8479b09f681395928df62eed39b58c4c8581df86a35e9b0df050c1042872a5b12af2f8d0286b0cb58b0f1b161cb2534e0897a93e20a8a6aa991b408c1459f8be9ce609013ae02583dc42ff23ee15fd31f33504a17b9db20daf9c339b0d265998952661c56c5c5b68280ef09612e360e0c87766d13283ac9eebad239899b2543a152aea544e685c94ebb91aaa0efe4fe387e818bc82e849f0d26e26fc807c186cf46b9384e57cfded9fd9632856b3aac8faedd3d21eb09c99b6d828bac8e1e2dbef3f218d1d2c63cf99111393fae588288bd50b10d30349e84745047247ee25f1ceb25b1541774daedb53428e12a768fe626c188ab3bd021ec0ef66d265a0d2116cce9c277b44f5eb79a032cc5e3c2efca7ad07995dfdafa0aa7082099725853d3c72d5e020c8fc6ca6c861be9703502f34c5db59e8335bd93e1f69e56375dc6191801889f39704ed263b7f32c6e5b31de19b8e1d5234e98b074c3c562d9b35adecb73419176ddbbf3b8daafb30fc4961e0a12477482f4cca9d7599222b9b2f0e93c21e6b849f92666aaba610d8bf82e9c1617a8d2727e96bcc97ebfbe064ad758676c4762671c58dfbd3e5f69cbf658e59fb331da1eca98f4da819249ee4a7e767218d4c9a7597ae3e613803c065e5889ff5d804ffa0baefaf2a317de3b239e42eb0d4dcaaed05e86ba9d7a05abe508857b62ec243a2b8ffea9ea506c8770a3d420bae3fbc87564f4471c573061b89b1ac255e8d410e2582b8b6f4fdf4f5a1bb66e44a9ee81da89acd38d0bb40100ae41f1a5760d92885ce61b9e7ebfac6d616b889cf7c87ddb9c8b2c8e03c9f901aca86afdb92d39c6dea2acdf913301a686a2c854613000fc848ce302261f5152457c93f34d6c50855c2ce60124f1f9834a4b28c3edee72ba5e9240618dfa761b2642794516914c28ae153cbad7027d1fd5c66090f9271ba2bcb27c718b7e96d3cbfbc9a4033e0facff3ef11807b0bafc333f639d468239886b7c96cd55d8c9459b5a2d829b57e8ea2be2a07fc704c593aa06da2f5abca10783189088f607f3c4a979cb0bb8b5b829e057ec9c30c393d752e6e116c9ce7ffb22ae0aaff74d04a3773e0e2b422cf2740d048a743ac06df077271dda80474d6eaa264ad437195668d9366466696107828820d1b6ad7dbbfa4252b543a14689e2bcb54fd55839627f2a576f4e62ee4a3e0c0bbd913c2d49195bbf1de4e0716d59cf5cfc4871c9a3ce5c12d3fcea45d618e1165d227a7f1c3227c9cf8855d307cd926c83c5772f8f59b51425b8ee86140398e3884797f007e4335eec48626526794f815b34ef473c35f59bb1f78a7e48febbb0db2b1cc08f80f3b24a587bb8218b2547abe81814fd88c5059794c22b33fe508d3dd0dd9410989ab56b6e184ea9012c54a37b789ea09fdb10214cc15fd31b7c29c782d6258eda11d2185062bca03638406d8fdff6350ebf3142111766e8743579480666ff588fcceef5c12b40518f0ae78f8b56a28605eceeace3a000267a9fd4ca1c4a01880a470f445730d6c6b55a69cbaf2959d2d12c65227d3206756e5a21cd297e1873f74724ca2536bff637892334975e015dccc4d76915d2d7d1ebc78a40e9d6dc9dd7a3030d0eb985d953e8da03c85343b1010e82fb9ecf63e8a6b3cb60c74cef9f85c1a5aba6afc03b02e864d3d60af3d26a8d4297fbe4c96744ebe7fedde4d6f43a06b2bf7bd66e1231ae9b28dbf049ad52fdbd271a1560573ac1115e188a3bb608657b34a603a9afd5721044e07a46dad090040ab331b7b1a5d44c4265e761104ef4e31352f2dffead615fa1e98db234730043a5ef91c51d51769bcc9d916aba469219f7ebdd76f85523a977349f0619a16c55bbdd36194a364d883a359089f23fb60cd6cc33cd4ab441b966d4091b698396e4cee39d94323107f3dfb5c49f439d31d895835f82402c77680804b0c36ced528db6d07146bfefa43b45e0dc9bd9e0b93a746b94b43e8a2a7cffb78a4a0b7455ed4bebd1ffab36f010fdab6448e1e9008dea7cda4f4f9d4c260303072104f1cf1b271bd981e21a267f8c1aea394232d6bef8fb1ce4b3e7948b78cd7d45d2e5859ef80a05def37cc1e1a9184d716e947f76a86ddb2c7988cb18a0f51766abb182b7431df58df3756be295f492b8187401d9701e3f04070043f7f51a388d61a4d9fe272c6c903b82739b4e7d60c84190682419be1c62236c3449de73edff2304ff7698dcac25adf6393600e9ee9667b586090598e1b61e39dcb1ea119a8b9e7f65402056cc4a0a8bc846cd2377e7ccfa8c426902a67b040909e2a596f9185bb70034f5d41b90242cf2cbad3a6ca5f331b0732b059369e9d05458e8c44a685629eea8fdbd8e05db5cee137f60f47800f68bcfc5a566e73f0025c6d67855761ef428afcedfe9a24c107c186bebe34cb339b4ed5f77eee39a9b96d439340f6deb9a9cc5288f52e98acc1e2b2b773b0b4c5f1885cdd3a30fb2d6dd7897128d47c7758bf5b0907b7103eef22e89801f5209f829d6afa3e248789d50d80d20a44fe0706a7c69dd14ef7f2e1060b62a9c1a76814cb30728649930361c2d3b03f0e7b7b7e84f7e5bb564c7c86af395c125bae44151a9acf173895b4e820ffb8e26fa67031292c2ddadf41ee4e7b2a55b3450ad088fd9b1f42e039603cb584a85b9f8014ae59e04fab8cdfa08e313c3195fb3f630115e74203fdb5900e1f8f0da6a7798379701ec15f408ab51d5ac6250536e895cc3dd2a62880503a7b5f55162f904d04c3b3be5548d834745537d1ab044118e601b3928e152f4760407b945019070b2bc9171618d123119984e10f73651f4d2985996f219bab938df91398e8ad3fb3b7d6aea70d69b09a40ee2397e07ea13315193f584307f6d55e261649059ff02b7f8cd32ec6789ee5a5f6beb537a6286dfc4c16126f712768c34f806ca6ff1678ff31378e8119a7ff8094be282b8c6097320dffd6e5ec9a7909b1a9cadcc40c8b6007a1a2a58bfc40f84e52ebba0eb5d7805b604caf9578d014ae1e0f065ccdb8cb62f93108efd1cdffa19b9e43f3fce568f5d2f065292e9dab3995cfdba27922ff1dd4900c6c1c5826fea2609144d509e0fdf3192b88203aeeeeeee411562cef78cc1a9fcffc04f5462b5b67747b8707442495e7848bb8da227211dffbe59aacacf219d006224aa39084889344d90038d09b85a03b5ab94ba60fee312d5b371f2025de919e16d7299edcf9960bc75f9f6fe2ab4aeeba63ab4c0e47ba59edd557a2ddf25fd53a9b6f09e5b09095c7c00947cd74f4fae7d8974e5b7","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
