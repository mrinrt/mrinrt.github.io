<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"fea65b2eca9b846f90cf6d258e78351a2d27e186eaa43ef3a6756612c0cb68a4a3b3f9b7e4e0d17495fba1c7d0cd99ab8d0b33ee3a9636d6f1043b1ebec60521fc1ac2aa097c0954564773a5b5690883723ff64f91014ed1a8f04eb20fc3d08b51b01e843ac5df8cc3d64c6fb64a1d908b44cc96d424797b6d2bb571a7eb7b3a99052a640e76d30ef2e63e01ceffca3fb89e5196873c8b535e42effb8c172e02cfa9f4f9408ec684eab1d585a1ba43d7e019f7941b101f4bf2c3972a7a1a929ab9a833cc0c01268757a47d2e4503d335741fc00dbc5ee280df8dc7ce879d5127feda29c780936a71c57e103d9df1b850cbff95794ccf2ba85141287928ee168f18403b3d42d66291f19b015108533c513ce38f1438c10812cb5d6d0714589bd65825de5df22e89f27c01e45f80fda60b4df5cc3ca4484b6722c565c3ef2419352e74a8a5db01e94889089621b9f4974d651e4160f6a35e9a3b6a274a1ca79ef0330cddecdb447b49726ef8011efc2620e96683c1fba6fab13f978ea506c5c2258615ffdf7a9c7139b326aaff33489ed65c5cd83ffc967b2dbc7124d06adcc816254e6c627827759ff85219399715ceecfe8bbb5a32fa7cf55f591dbb192ae44264b1153a3364049b05702b727974e0f4d388844540a44fafcca0a12d6fe23ee770fe296587f6504dff9e81eed47c459cbb4b98dc14c159c35a5b12f496de7d662b259d483d9833e557b821748121cde8e33613563d9e55ba4af8622a95ef5c4635e5f2166af9198f958949f04d3ccc7ca2ac2512923a6b628a80a5b7b68ecd88bffb9d96e218394fa761a2daf81c5ad70cc2954aa4d364db2a47616b7e8d5f6815cf81e146bf6ce1fc7c40b32cf66555b6f26cdf90eaaea8a762a0107e3f76a761ef1e9e460f52373909e7fc6cbf855da7934983b0d3d3e5a11a48680ce304fb0e6d61fb4052e2efc8e96f37eafa7a397801e0661351a7f2dfeb0294510ea66304038624c6c4602bfaba942fed8f8e11b5a281c6ff8fbdb0dc3650616e0598a93c0117915b7f3c85c771c2796337ff7e6a459af301b25f43a4efd7838c410b727ebbbdae893b700e1ba2370a9d5a6fc75b5807e1b080d6bfc85aa8667625b35817a0576f491deaac546b55edada174c3fdebce82ffb1fd66b68ba0f958de5c51800adc8ba7173002cbdff9106420e4562ca08b62d291c70e1725cd239aa48f3832673fd22c25a98b9b3efc853f2903214c5a9a2e8a9eaec1547f7f0753c4e2d31ef062066da1354dbfc4f255714e035c9e9cc31c2fb1f49ef85a643248cf754bcf1b8c333ee263ae767bcf76ea0a9f1ce9590c36a27fd16ecd1abcdc06e489d1700008847872246dd9bd109e8e01347827ad6d679728ac6e6153f1db5cae95c90c845345f24a96e3a4a62418caaaab10b71bc78763868947153506105cdb85c3bbfadf4a81b25c26bab0d1199fe9335b567b1b45a97023946378d3262851001cbea10d5f8f1a29289ff9a29abed4fb7fbc8e18959592991e35260779a58d248968362bdf9e1fb182fc9aa7e3c97384594e62f6b63fa42b0f43636fe203b83ba4e66f521b80ce0e178ca0ccbe9095d40c6c51a6860e66f7d299508bee35478ddb917b2516aadd3aaf148665a3060daa16fc7be8002fd2f2a41aa5c4443bfc2f778ebfa48be7be9f04e7a13baf0249499ac116880c4c6eac87db428ac9228ae92a7fd522557621829eeaab5a5176f4e48fbc729a5ad121617b129a5284c80d7be6c81d2b19dc45ecc04d58b98db6b8d798083ff940ed9b2dcb096c4d489c60873bd9113f7e145b796ca8824c4e6731b78379193ba9293554b72815cadb5490b93b3a4785006f5456e84263b610cfa0088f69a97cad8cdab783d7b78cf9d97e52e867b81a7e771bf81af90d86177fecdb2a5991dc9f0b1044d2d614f87323f72dbf349f01ff58f2c98094a869c53bfe957c99cc91b8519807190896d9816639c3516d3782abfbc2e13d2aeb09f28e67790b0985c1e48de46e44c6c31bccd79750f7e07ca3321238f1b97231654cfed64aeb52841cf4b40a1bed11517850a556ae8f318499ba593e1bad783731e85ee2e32b0fafcf660ca39c6874613aad7bb4482358f99598b4947ce71dd60c4132683846d87fa93d122f15c03e0127d924f62bb70b6eca98cf7c7127f04aef1b899a1219dc2830a2f3e5887b3970d031ef0eb3423939e8b1e74d070e5475577d4aac9b8c087e35ae7f6d4af97593d5c9389e98caeaeeb0eedc6633d91893b347251b41bc07af6967d02eb2e266f2ab6267f5b43f3153afebace6f5080405cddea91d514866e501837e97fd92f1ead47ef8f16790b94180b64bb2a15f0689591bc1c3d8099c09f0fd52de8a5bc889247110115e6f69bc4f1a1d7e718328792cf6dc852f3b088dfc7409cf6bb7f5a1dc6711b7a23196e47c468f33d089ec6e83597f45457d20155ad967b83f1ffd98356fb3360a68c5af109a511c3d4156d60b789cc5e0ba3f6698d8603e5ea28d9eb02b13807d2a183bc1c97d9ee7713d73f782b5997023a8fd67390dd30936e0c5bf55658678670d481ec3158724dd5a61117977ed92d32c4799ac13a904b5d38238fb371cb447a38760b7e4a354a6c1bd0c1b43cacc6f21b31aa9037944cde4122a6d1d8f3f298f48bdfd02a13fc3e807eaaa433eee31ad8f2949da0b6a4d823c6f584b896d58ab894c03a27263f86a2d55d377cdf90e232e22a5fe0a2ef29ca54e2de9f0fe8e81e2601817ecd082e110dcae8d39e1d289821c9b51a8d7e98cbb103c5e885cd27371ed06b1d013c2d3f1087699d1b4a76712c9fb43e0c7ff3b428f4c8f350ec166813bcc1d164c73bbe68c16410f140501b54d5861a72ee29d74e2f9d05432eb9c1bc537b32ca16f7e97aa3fec326ee7b022938cbd4572b92c4b9fe41aba685b8a20aaf301a1a8c94959d00f0adfa28310cc67e473d370e8ebd51231a8d6b8dfd1d08e2a8b9b471b36539f99a874e75c708cc24f2ee59341fe5604a599d8f914f24c2674cb7c5c0b2359945c77b97084aaea8c7e5cf441a0df782ae0c509640732b3b4415e714a26d8ff6b98a910aa59111e8203a86b3ea79a52e6c40ef690a1b6d950432035d0cb1c7b532b6cb637b4654265db39c959bb897ef48c939cdc71b5430515563f1fe5a50794d20ca7537b973de438f49d1d7d6df1e6d3a3052df3d72af5ba8448bb201e3fa9fcf7852fb9b06e60c04a154de25078ee2b4869e56a556b7fab04786c7177d33084bf815868b36e0bdb6c228ef62ea62dae5860f90789c45da624f3be5783271321fdbe0da97b21210c102db1bef2c3ed7b801c2a662c28c9407c9a377fe6741f2bc9d87ecba723c1cc75f2bd5b463f3b389305e54468dea38dc25807bce85da2382fc1cd9c577468af1b819aa579515541b9dfe94d389f965ca34f7215671ef016eaf0537870f06f9ae8547dd69dc522880a19d9eaa945da469a041c250697e38634a98c90ece6d62546398ec38f1dcd09240495b5e32569185f7c515d836d4fd266b851c5016bc804c68c7432f036f0ff2871f3119817e6714a32d293c9d4cc06dbe2f475980e2d8347349ee192b130aa6a9e647ce403b6e4efa1d3861cccebe14da540e33e32e4e8970706a486ee718f1fff299f5d90a0597333c294d11b2ccd9f2d2a0bd32d2262609995805b5ed185d180a193a803206be039de58521be048c2ecf743f6cb4fccf93bf92226a5895c0fa422e03acbeab313ca6eff9d3235de0848628cb015c0e55b054a9a81de67a5d17888a1b791125fa3e6cf9eecbc4cb71a51dd3ef3a3089bbc880171fd02e3b1a5b5a1f6ff396738e9bc6b770b98bb321da6ba205db856a48ef752bbcc397889f4af2128bda60a7dee82c61a1650dbc84eab0061117ffe29bbeedd08f54c8d72dbd5a21d40934727a7d3da30c8933e120f39f559662f253ace6ccdf5612fc5a98e00de69d253d3e2e961a96dfccffb072f62ff08d25e7a5dd09d6e3203b80a27057105349fd7520334b0188f7e0dc0c94915161f2b8888ea7fe56fb9c7b3571b72bc9428a6af4fb3aaf251e1233f946c75f58bdbca1a06b0bdd5db8d53aff247318ad2bfd335692556952a5eaed3fb39de1f8fc4a66a5c0a48825e2d01010271a491916c4822815b8f357152cdca3578c227c5236786f36a3d466b24c8329af96ca7f29ddba02226a073f49149f9d63cf4ec5aaf1035858001942972eb4e4a27a90022f841d23850b6c673ccfbdca114713fc15dd71afc41cacea1719b3455286238fd1e608eeefda956c556b4fbcf660cff22840b2d455d0a4dec0ed176407a156ec509b9800bfe109c69a9bcc8b3842c35c0f38cdd93e701596f128cc415a72dc5c775b7a48e8ec9a80f14c4ff8df5539d77cf25226c987d0c5c37508df429c8d4b3f464a54b4119b08d8209cc7f65f74291a278d893ab0239c0fa81ba2ecd33e05102c3dac48317e3e160f9f76b6d7ee0bb84bb59cd0f6bd7e12cdc9d1a5b99a39d716e9f9034547ecbba6261f5b10f4c806313325b4e720718305e4e4b38297e5decbbc68096e38b37eb19e6e6f1a1d0c98efbb768cebf61480f67e7df4e3bb35346e763f7e616504083abdaa797dc32a1fa84cc133edbec86b738342c79ad257fd072598a8b9baecab07b36dcd992b2f3606f240beda08df0c10b3e82d302e4ff8f6a6c61c8ef03c90edfac1d9b610839494b10348e13272b069b368deea0b88549f491774625d29d7b1142788300a6b80334808533e8e8935767b65b8fe3fced354e7de65098dee0cd51015a85286346af50d2c562fc276db98b29598bfd0dae44ca55b78e3ed357019bf519d2ac6ba703be3872916a3e15708f6007e2997ca413495dd20054224b0da7c1ef86d00ebc4ee8bc2c631f378786dab92ff5c343ca51abe2301860733ced97ca7c24fe0a015d0afa9312c5df6ca4a625efd88dbddda80598b0d520056627bbac2c107bc8d373ad9e4e6e9183c341146494f755ddf5942e45a91dd5dae37296ee03c6f6ec32cbc8bb385324943d9c6d78637f759c5494955bd5394a59f61a51df6dbd208bf3579c306012d940b8582ceb117c88c0f3db1b89d48b9886fe178d446ef5188aaf0439492b83120adbc27358303b0c97dc4b4b4f511ecc607b4c88d5f5b5aeeb4e917c34b35159176de03213910ee737812313aeeea497ab247a7717c51f8b3446058aa7a8b264e3a43702e8c7048b69b1cc4eba5705852d93dd3f87333f80d5c1ba7a89798e6410aff4c2f0fda5dc4a2679d93aaa04d573d7b36d7a32923a468aaef6aab3a828c5e1fe692c8b1dd0b5a112dbf310388689172231595e764c612099181b6d982fc38790ad1e3e3c2b6dbeda26a8a5f6f19043e0c7cf42e2435b0c125e14c817507be10c719292907333515d982901d8df6a4802322fa28522f94b51b10742997a201e30e39d26ea6edf38600e6205b4d3b014d05e1622fe53b212ec22c062bf1b637c96c4f7ffde4d310988040d8a54223e154c32bd83721989493574f2292e0f5ba91858b85a0d9d44d66e65c02c726a96abd98188356cbe322d81e8186ec7911387f3de0558db1e7b079acc8536a8f708be59593a44544709f2cd64661fcff4de7b29c61f1c125467b2491fcbbe8c23bc63a3f3be8a884e62a3695dd13645e13df2024ba1d10ddb46b9a6fdaf685afcd04e098f4d47dc53bdaf1b04086a22eaa37708cfaf69e3674c4cee3bb7ac984915e1fca10de3c43f4f4f12c7ddd8c3005b6cc1fd00ad7a10debc59bf2ba3b07a583d528c5ba6d3c1f1ac38ad9c76ccbb4dfe57b3a4101d10441990749b2a5d0f3898cb24852eb8807ec5c133fdf63c86e049a21d9d2714ef28d493770d1737b93955d18851484036c83eec308b3ce1fb85e5863bd5864ad8d6ca05c48a378889b6932494b2ef6f6d2af9691fa47f3f0d0f4a43885c895023c33c5eaddbdc44e93b185c2305eb54bb921b57f9394e33116e17e721e24fd784cb4e66040ead04d567afae6c9e127660dcf6331815b070996c38e73bc8349b8cd519634dea64a41141a78b96adcc025e45664ad7816a0f284a9ebfa7982df4442247e8584ccde768da29f5ecc53dcff84b0b78680e90d1ccad3e48f7713fb3fecfd5a928e9264bdfe311b22ff6a1879d4f5f3281e5e92a1cb01c7a64d65ff8b66b62c8137b0268cac35a6274e0657338c6d96b7ce0d662e2caa5d9818a5cbd3fc076a1afa55aa036b25efeb60a6620c053de5038d9b1a6e8e71b4b125668a629d396a71275dee8337622eeb2eeff608d5dbbece29b6a5e9aebb489969202a677908ce7aec6562ba1c32b532ef4b5bf6738bc0e7fbd7c6b5dfdbbc6f3f6a2c41646eb9d07292011816ea50a652d25fc02e683d440b4435110f3835419f3324075c9dcb44d45be36c30602546368a0b245f2a572e9e1f2e106d8787ef5e1a6a7999f872e6cf0cc03af5f0923a8adb5d2c1493a73fdce2e94abd459b514ee340e16f841ce9c7af4e7305fd449d0655ba8898039f476c17b4b386e559c0aae60d34d4cdd27d2516b1ca49ce5a4ce6b9870924effe3dc00afece528db6d0023581c5f17001b8f1fe2c2461478f43519762b2fcab74db8f10c879667164fea6348afdb4d54c07f0ecaca69cf9d225590c5ed149ddf6ac5a4a746c5a76138ec89cc3e124bd15046f0fd5690f432527e974a3419e534f89980c0cf7db53ef3a0ccca90ee002728731a15437a721c9b0ac7784d6cc9dfd3c8c21923dca6a42850c3db39fa0b91fa4e3dd392d6b77dfff6224c8749cc1f0d097f8a14bcd8af825e965053738ac0fb8ab60806b3e73d9a52163a5ee66f4c5932319ade9e00a4f64320409677346e5028060e222442eaf82f4f65cb8c64222865cb0992e4c6708ff98fdf4973180b6b385fdef60ab560dda84c7cd992858fb9834207b9189c5637ffd3e8498a563407b2cb7c8a530689f992609b51c42631331b68bc4be7d42d7054cb2bee52c73be15baccf088a37d58a3299435bfa9a0d7f36ab20d87115411dd3181c6e5350b571a4636b11006449d4422405e66a15226c7ad70d84c0ad6ba28a8ee0500d7cb94dfc7021de9728450a3cd0bda3f74afb7dded2761b4cf3cd0fd799823fe138d78124b610cd7b9c33409c46964c26d51b4cf68500002c38b92474a1adc9cf7bc1463b58650a5930e2775cdb225f3771086647d0e4c516176ceae69d06f1c40164b7fc0a22f141d619a7ec8f6ced5a14292c8d58ffd296c7271632a7313eb1e4e2d643d179aa3ce83d05d889ef360e8e5305a2519a95f2a53b7423ddbd0d9108be9e3bd0430f645a3ccd12ce5203c80646495ac550bf52c471c7a2f74ac72e265dfc6873fb559cf4a88c1e3674b28345952e8fd606920347cf38ffbb117c835d8270067d90671fb2d5061c522572bb05d0cc28e3a95a16bcbfe94c529d3179486ebdd91a6f042d2b51fc08b4716f65a27b63b44fa65be71a37fcf8754f1807522e76d18b09dd585b285ab2287f77e70e4c4f80ccc0a6489da317ab9261efdeccf109b32103a15732165f764327c53466dbd1418652f2af5c9b6e1d33482ceb63fc4cf78b6be73fa7ca088b3c872da9067573ea8e3233078ae0a89271d9ce18d603fe8b3781c8d0804f9726459b7d1d6ee13569a5d94368613ab14b23959b90cbc05f74c57fcf259e7b46806a8902ec75d5897a8acd2867f204a9681a99cae1fa8b44a248ffcd6db9bc67fa0436304dd9cc55f23ae14aa9e558cba60d717a992ddd6c8734ef215e020f82f70f579f5838f00590e36f22ccabd6f41a5d423d487ba5756bdbf7317ca6e5079bbf4119a4614a2546db20ad0570c7a64ae59f15d21593b6a57a1c65501079072b98d1980f70e12c25e7423cece6812a8c5b52a1b8c5c4ee902ee10ff85e4faf3dcc8604accd2ae37dda85b6e04cb3846e642332e33881fc11974bb03fe96425c3ec6d38f91338b024fb6abf1641020738f6c07a2a27552aa6a0922a1516f4a5642714ca095e2b179c907e41589f8caf326bff4613acb2082f5c6f6f566f4a18ec61a3ad2cd106cc632d738efb327aa678a3f1404f37f9fb9f013781c7a00565896e4892f01002e8de22b1a89da786e0621774ff7eb796ba2f427fa0e331e2db8ebe794ba17ae616ed87a7a6ff2ad10969da23693ed08b95e6c4deb0a958bc90f22f609682ed860ca99a3246604d63843f06a2ed18c9f55f8cbe2c5a283e78e9e7568d5b96d8692ba9e3566f485b7c8c0926c9d1fb3d5826eb9f6cf830eab41a6b95bf29f82987b47da22f958c9d5f442c942267a02cc11e0f3605adbc120c94ebe611c0fb862ec0a23d33bc73f39d6b2e34fb161e0af0f0007babdac9c5dca6c936c8b28489b2da9412835cabdae5b50a6140daafc74b5ff2ebae882a89595d0a71f56ecd57501affd004d51fed2f705fdb905fedb17f87be576e2b7e377c04b23305d4f7a25263d8abe94ab99dac0d8be98b98d517b84aab53bc041fc0d94e3094d409f9307c766993c7ce3ce15d7a25d6e8adecfdb33d4347caa8212fb3188275607e2c4615aeec856b9ea098f72ef2b65f3f745375f255708c0d39f9904e171c70b9047d2de74bddf813a8e5d6db295e927d73e81941fa1cd6f67471c277b8a8e74e7ce52ec7ed63a6df29f4c607e1c127cc8a801c92f65b7eb09a1b74f73a71eac3c042cfb271666b5660aa0ae439873b4484eb4c13ada7204a157adf2dd23988cabaf7b27a847a6028368952b9f9cd41d9285ec5181ed7c5f285f2d7e978f3ff985b880c74c49db5b3f9b56233b1a1be63715e064c580d2ac1feec915fe659c651cf0d455c934d40f225b76da7968e3f32c30867d3c81c1eb326119107875213b280e52b54d7db462a2db62f1b9ee8d092913e5cc18a6f4fbb8aa4be84aed9837c621ebd200460098ddb7a0f47c032f3b24f8ba1040eaae7a018122ae3b12dd90e1b0dd6f21963ff125e43ba4f03ffa73113823491a0d04ff905727618788ef58629984b29f0045c85b5d3b464b7b212c5f1e81eb97a2ed278028d0a937a706f774397d8dc15ea5d34f7a5023d1beb4396db001ead5405d9d2a5e2f9ca16511ace170a55370f5608c2fa2628a39ec0b328b35ee344cdfd33534775e03af4f3e88fdff099f386feb13a63017f88f3e72ca552fe51ea7ceace3d3ed17c1ddcc7b0918b4d69886fd8f8e44a39b20cda35dea99a311d9149c95649372a637782a2494acde2d1a4fe245350118d0b3924def99ffc1524d3fc7e01f3eeda94a190f8dfa8b28221703ab761cfa3c47837f86fd99fa7c07db985bd88467bba5380ba133e20f2abae22ec9993382bac81973d407665b9bed895d1678cb6ab79a7623680a9887666f5051e08ece1e1facc5f1d778aad2701f6b9b5a7a43f53562398101a9a923d52af191d8b1ca4fef9f362013c4f1cf714be770edd37a6fde052fab113be8c4443ea45d403dcc06e411cdd12a9f975c1110b477cfcfef60dc6e801a326fc7784389742611e1acb9ddc123375c66e9896709f6f42a6c29ff1e2cbd8d213b62c18c341b96b0a355c96c43f5dcf160023c2250dbfdf75189c59367e6f2be47e315cb5d8330553c45ea3bfcb1166810e3a6a58238b7b3e47e67edd83f0fd0bf553fcd49e300224124abe22869bbf9f0cbe22081917011043868b45ed10ac6651d36756185751e50ae4e479df9ceb4cd0f57feb5bdeae32f5211082f980eb5c44da9cb13aea2e4adc432d9350896dfbeb2913e5c18cfaca4a75f700d172c2dcee6ccf4fd23fab35870f9c1f175835d5e41ab76131fb3311805d12d350c63aba9c00ec611d3c715ec61938f065cbe6f6704cdf3462f02a97bbe8f6aba2df1aa0e436b4367e2ddd30655bbce9b20c94e6f4f6a71c2bd483c5f3f19632fa74c16a845e4d5f66d4cf83370c54c45ff50d505f25a304d9ad66dfa9ab9d7711257ecc70461a17cf5ec323b08224651ff2f23bbfc9a63031ab7e9ce13789609a5d137c6c5f17109ea8b38cce9eb16cdad74a4c892fa5ff46e16d72cb8a122c5c23dffd7f9f68795b066042593ac98934371bed9e4d1ef585d3b0dd987c82264063db8cdb845eabcac1e53bcee679b5fd5ae938c81cbc49cb75cccb7b2237bfc17deebde7b95814e224d0e26fa8807e63ed51c9f0be2955fb07c178da44ee99b4006e34eb917ffc50cfe09c60a5e47e1597bdc5402bc2f9ebd4ddfdfecd30ac985bfffe33a63ac332fc0dc6ca138064bd25383202cd0aae56e6af0da5fe1518d21fc4687a89029f5541e1e49cabb9f783804dc97cc675f8021721dc7647b5b2f89681090ba10c13a4409ced7c0181ace4b3696dd00cdabc4358ae1158fe9fd8ccb58021e11e3576512ace59134228d052091830cd60a923e8e30aff42144faed33323b85766b2a9097ed5ee5162229b9b93bf71155cee011cf56a9d64b59fc2282dfd60bbd2e307902ca6786024a7a60e5ee95edcfbf2765cc67fdd3f57aec24c072ecf0679ad9391aa68641f5b1eccc8124bf7c6a056708d17fbe032d9993633544a3a74f2bde7c0be3edaa69154c81b8f6dac6f9f812c8d966322bfe4d363e92c9f4aa8e7feb38428c44ccd39566e954a4b968d6cfbdd29650a1f7b91648e523b51c9a61419f33b8fa9349b2db36ad6df092edea0c936f0b0729287a1415c75059dc084266de7d642d8a7c9cd159d5ce2eb491b775c7b534d8355c8230729385ebc344a4c305a380b2b5828743caebca539893210a419cd799c98cebc60280b82730c0f44a7c06f99ddf3fa36de4ddfa9ed6ddb27f3c1a77c329852909dc9303ca17b06df45f548f2ac5b5d0051d8faa095638f0aca9037c880d91d943a2866fc8c7c8c6e02a7a14bef466923ac5446125a15a22f951384dccafdda1afc5b8e4aa3953e89867973c0e800bfdb03a4bf2adf03ff0aeca64d4c4fb0e5738db7419aaefe7eccdba9bd1addb2a7205afb7cbcfb4531358202fd586fd7f12d68493bc6e55bebd7055c23233b4c10975dcb378ad05603c878adadaab16c868f1efc5e4e9d9553efe6ea4c351545ae4389f22952c333961a7ee444009ba585b273f45b3b516575a0bea3e543f7751528a964b8eadd7e193ec53345c987d5b92377d49405b12f385f925a054b65622bce643db4a291f04d0123259af3ddb439da9bb6f1481471f30a6b3b2e3233cbd72076a7d65df107bec317abf18f2df2449711da414e311539a4b954108a5d7801cd8eec0331cd7e9befb4905f314428f7f573b4b31a726c864ac65a8d6d76ea4763101b87c755f9e75815a7e5f81d6a680e182db5b521df10a4a95e6f1fd3f9326a83e8fa3628394bb5f708cf464ac4f641de3fa87ca8868d14d68b4f4e00eac2b70d7573a920b4b43e1e7ef84bd5e394b931a389d4c596b58e15ab13043b93e249e60e573af7c41be037661bd9dee2c2108e557e16108449bd9cdea7a6fc5410268400a874cc7c6117cc025046d47310ea2308c1737931716f080499c98b812f9443ce2fd168a543c60041749d333f586ad67a734d9fe18746f59c096397bf2d05e55274beefc0385efcbf29b3aec57e7577f22725c93888caa09f72ea629d84e614b2ee0b9f262b1d63200123439d83f5f2716c9a3b7e47142f824adf5047d9f8725316307ac4dc8b2dc643fe7290d51a5cef7a993212feda9e2d75dc99271c0cd935c4d4593fa3540e8e53f31441cc41f1ff4a55bc52e8f5a845a2ecd627275ada4188a4a00e2978959e89ec51fd7260583429d8c4fc567a87f148154a5b443acefe118d62f96ae5e5f2b97e42ed37c9139835938b963c97a9d7ce4cb9bce7e0e5355536e61433553243bb24b58d3e53dbf76f12793da2fcc7e048903da46fd5b11c6ace488b3e539de165285b59d60813f968d76d4461c7b5404d0d1cf527ab2c3d451ebc39fe76499d335dee3c6c2cae5db3ee4b3517033cbb35f79116d76809eff7ad0beb023ae40d5741908fd7dad4ea31f99190dd2fdaacbde2fd7e87e836446b7567252f2e7bf467f63e7fedb70cd03a9d9276f66b26c8f8946bc9b106efd252a161356d567006007730fb58b48750ca0831f6f15f8b95af3f3cc292eaedc98d0e3e4185866ccbb52a1475b478f503dcc2bad5684ebe416cd49d7ba5782511563ce3f793556ffd534df7a8c7dc7a3cd858730b17b3aa5ebfe0c8cce5e7da3f50c147e9fc6b5af68c22aa64c75b8361781e7a4951b2c1c46d3fefd9a7d1d33a66dd8181e64ebdcd9bcae36889e140551a15f0c3c00776e9ad2a3a74ab82439e3ba8888cb4952716051cbec11ab72cb66f7becd5676cdb78cf36a19ccba16f04b7e0280b1e3714ccd9715d8bbcdac59806f80d371ee31e3eb4e3ff1dc7306d1ea6d3474123352167ff3b5aa8b12d88d936427ea2eb348f67df9a5db48d9cb96a571812d2f318b12588e2352345af004a522f3f7ce61ef2624c44ed99a58381aff49220c9807ba6fab5d87b94ea0a56c6e2c7aafe0104040632827ace5dc99fad6746021915033f5bd0d9a8772123dccc3aab605f32422555ec10cfc83d98fb72d3ed8eec1171e0876bc5b747422526433c7df848cdbb4252ab4d3e9293448cd00c5379316652c20d7a90446e9f8674f666fb0bdef66bae10bbb2cc7b8a99a99cd689b62bc451764bd90d09ac4786c41e43c467235b5dd00f09a1789f3ff3498ec863ecac75390aed937a7a72205a27ba59a0a74a82725984368d48ed43cebda6809427673e60c3fd5bc0f0f8d2823abd1398d6233308f51b5b2453f99414b777b52fdc5e5a92ab91ffb7ec2bc2936e3000ce07a2114e2ae6b5b1777b3848cbdf0ee0b076d7abdd0637daeae4cca6315272eb07a4fd53221f8e029646e90a77fbda72a80b40de4c2da06cf19495c5cc8dd272b944b993618d9ce40897516a1c1f46e795c71fb7f3a32fd0e5bb75ffdefe59e34d9fc48e865076cbed5b6f8b9d6848aea44d66fd0e524091478bad33bde06159f464224e7bbfe4d88f1face95c04f028e4a8538984f3c00e8e51a72de981d2f6a828053feb94844dad3c949a4ccd4332d7b0d073d65400aeca981e08341be321e2e4bb0daf509733dadac2c42ba1311468d0728a0475fbb35fbff460a003024deb2873ed2bee96e5eb97fd9a59d47775d2a5d995a9f2813a70c91a0b94f399b311eae5c25aa6dc7262776c336682497b578b7457171af3e9e89382d9074ef36fad0cafb475c73a172953f1a76076be2e19255ba7e510cffe2f508cf11186d2fbcb849993d3bd04d2c35c384ae70ccaaf73bd6157be1cca5a9837d4183d26c9d88567b9395549aee68a2e0d9c654bc0e8e395607a2b25f5bce07c9cc07e4a36179a0fae6aa30b71729d04b63bf13e17be23ce4659198f4aed156e5a3ab7f6bb6936e4608a77ad787c884baf447e5d08a7f1f9c2dff285c234a5b2c5347e8b3305e86cfd9ae72e15cc383ff1f432e910ecb4d51e608ab9ad585239c47856d26c25da1fafaab701c171af7b48c5f2dfbbd1f84a484dc52442035625cb86aa39574a13c6b1b65090652cd72c5d2f0b88036335945f75f9e424c82f32f1712c4b848cd525925f4d5c3843b4ece64b1e778034bebb229bdb5810f2e9e340d6369a6aabd7de6c3257f006cd7836f2b84d6ec6b936f9ce1bcadcc9f75541d395ee087519d8b914ebeddefd2470bdd8200a3fabc3e8351262ff84e046921ca958bd2424a77530b1575b387a1044fbd1e2cfd3043fee884f69293ed426c75b350db20bce3e2fc9f5d574bfd8644de43dfc94557e107379e9ff48e916539cb10436096a26263b482c6340e2ea12cf0d774c8eafa5256b1c193f08dced9e4b121144ceee88cb9fe25ba3924bcb865eaadf3ff2f2726a7011b732f46355627b413b065c69d0b9bcdb427670283ac1ce16b7d11d6378abdf5e25b3b6fb09c1d90c246f8c78d53410c740036e7132c1a1475c5471bfdbf9f584a2c83215ec2ac1ad85644be16d102d4835df32062e92cd069ea8e5700c960198b5478f0b77552ceaf7da067bf355b40f13ab7507151941aa2baa39c13995513ec419ad26ab023222d69e4f3e326a52b1e692ebac594b68d3069b8c68e7afe14a9012afcab2ef623ac74f2682fedc1b33b2f664416e6df16c73ec4cb6da234846f5878962150d788b2deec30e4f29abec5fa592d8ec0ba85746f5a8fcf3c0fb82d35bf121e98b753880749563e681cbdee1fcc18e8e2720a2f6467833daeb7139d76870b1e592b79ea8eccfe61a51ce6f9447301e3158fd6f90e52fba45053ea57bcdb670a0db5141e354169472cbb20f7001f7d3434e70cef131eb43fb54f79fe04e56113fab4c6d8606d031026c980e27f4dd67e43658b9d74f67cb66d2757c8e1b73fd397b203e49dbf21acf1ad21788b162809afc2b3284f8b9c822392522a2bb785c3e0e92ea9e5a845b192040f2ae77391ce1d80ae360cb7829e6600dcd441504a61fa6df5470b842ca184503e83c7088439da964d7edeb6c046f08c83391e2a7a42e41fe6e1dbfc9221c0e2fcf3f23cbc9180497ebfcad29fda901bbe6e31ceafa70c5173f92873e40df34f38a57ae435b8455457ba38590fccce4b07f944e0d2c4722e49bc07f93ee8135745705816b6b41a1b9b5232314272bc40a71be57225ab79a9417c89e4b332657b15b224ed7f0a8fea4c292697a70a4e1215593bd62528c5cab06a82ab9ffcdb1856e619f1c8f6c218dbab86650df3dda2f333bd609076deb40bcb3045f34ed0e825fb32c9616164dedc8614726ef0d19616e7feab7fc7c7862d00ec239e3435c5d5c99a41a586b80e571e3eb15d2f46f3187a7643a8e900a64a2c36a0cd6dc1b6b857005dc6a0fd7424c3a8a0dbc9c4090971a6c9d4037fb6a4448967c5908cd6eb63025b38167ab2a44026d6016f7c0d8a7fe1262d4fa843408308ded86316dfeaff81412ad83bd6cfbbc8efc8c0f50e87970eb1016927f6e95e3a10399d68c5910dd6d676e434458bc41c4b505fcbfcf33e791b23c02cac8d376bec7af3bd4489ba4f48a6c06c4f066ab31729698ef770ce1f9612ba4d17e05035a50a114bacdbf459dcfeb083aa5bdf2bc625d15ed75bcd5355cb306c54ed80c2c5897261ba36ddece5affddd55c3b05fd1517a32fdd36689789e61fffbf74879d8ff2cdf9acb505c75b23e8a3f9f58c1862a30312bd0394befa15211b518452c2d8add3c0ac5d4e59502113923fe9665d4dd591c48b8268d56eaec085fef0bd8446cf0d7504632b5087196c5a075e57d7b400e3fe5f491a1badd68364f17da93498ccaabb4f06191190e194c92f82a603f03c4075941f1372eb4789778bbe257ceb7ab0c34ed7fd3d06b0d6d4f06f6b09a8a25e1ff0a8f27a54b43e2109d6442c01762c60b21b3ff9a40cefc9a88c392244144ad94ea2279389ae4584c0781ddb652d76720c483918598a84c32424a40504773bb37865829efad69208b8c31238cbf2e7a59d4b8250f6733e9d4940f0da5514a578f6e63447e04383a2e12e06d33e00f8983ecc2b3bed85316cb566ebeb59d8cdb7dc3b1e370456692a0cc754f28e2ef2b6d8ce0c10b38b1b88e1cb8ac079c9fa7bb1091d34078116ce6e7a4058975d2f9f05a4e37a62c5311c5c4e0e9348f04bc111da42f688cc2b63004ddf32c409743277620c95d1e8d6f0adb2f8ad0318eb5aab8d17458a274f5a7c4e6602e2132e6639ab5d0469cb231e9ad7be8ba68b41c21529728c8188aa575d201d137e51bff6ceeac48ea3629f1162f52c3035b51c8e1647e6486f34b393984559bdd68fc14303fe8d8cf0e50a50a903c008ad777522299e75772904527ba0ef2ddc3a5cca1e13106476c9329b4822f0a377b6c5d11a88f51e6b67e9e4fd8ba4249ad1f88ebcf9d1e54ce0143f2e0b648e7809346219c3307297abfcd706588021b933f9242cd75861e0595f38e41213186f58e28682089dcfc87b8c95bd27856a082540b9e93f4dfd88d03908aa2645bea3ed3264d4f7ac74cb0de3455d1e876f89304327876d49c7d5b4c2d5cbbe58bf35d828359e112d02d171391da19d0340d051e9fccac94586f50cfd3ba2b558aa4d79698c05bb7b695d65e0424fba463ba484a01448fa928e3173ab2d0f9c5eef4458ccf3eb20b2405604e9f146710ae5aacf98e327fddabac6da00e0a0155f5a24b97045c7a0d97aedf782db0f3b1828983223cb76db4fe6dd5ecc4bca99faa15b018b53fd01f9cffbec85f8e0528ca20137ec57f061c19c1c748150f69616054f817a76e2ec6c950a3f94a1c8d573298aee5af660c0128a373a30d4cee1180847177483eae40312120457f8ddbed246f1ac76c54765f55b52b62b75847cb65436d68e7bf1fdf03a7d31e44a4d6246dda6fa86d6021186ccce221b8de40b722f17be56449ac9ccd0426cde55cbfb7d44cac09422093d08ec08a6cb8bcc39b692a18e970d167d3f7a79cafacfa582908657e7d3e792cd4f371df1b18d1c83c37f20e66adf906c0dddec9a5d2e4fdb9527885916e7ae1d9258c5dee1493fb5f420027404f3ee7dc88d54e1e101ad2cd53397f1dff978860b91264c85b830713844f4933ca30a89ca33c5aa88e4157f02f68cfa7059513f3e51271e6aa04deea90f4164c5e5217c57121da6154ea615c20d0ec8b952decc1a69443435671db3cf50b09be8be00890b63b8140339893a7022156704e70ee6ee6284d1e87a64e1797858644fd41154fcedca4103ef8dec5510f47f24fb64faf4f009857a416efbb07a766e59961dbe3ddaae523ccbcb74ec1d967728147d5f5a13d796f648213fd6d1f83c19c20fb1b5531b08fe6c1faf7c6e643140bf6d9bfc8a9c2b41107b1605df1c47bcebe8971f8523f1f8b731dec57ed1a4c643a0908cd91873ee8b14b55625530efad706f959bbe8014c4f556f86f83227ef80a4015291ed67864e3bd9eefe4d583a7b06ab2244fccc32448ab7723cccd76a3d1624cd5dc9d13f692e9a4bc8b2db907c0c86424e2adf48f970eff63316e11f5573d29923993b3cd71559c03d68f590a3c428cc87b713718c2fc878d9507db426721aaef5518f57d98641369c5a23f00021f42eb7d3b54dd79e45d7337a3800d62c3a9d44bb8c30927415b8055e69a2553d33ecf72e8256f2042dad984fb2ecf3916d72fe8e175f46d7a6d8eaed7ad424bdc14d337b8d9b9cd819be8afccb643fda2cea7e68822105e3ab08535ea276a4f74ba66dbe6da7a9a6f8b7d967af4d74da3300ed789f4274fb89dce466021c9286432e9bd26d6ce82d32e3e246cd252bce1126f927aa855cac58bcca89d8a8b3aa8e85365eb3c3ab2358eca2ac6cff3cbad362533d8f8ad58a55b5016db3b451a9b97dff0fa37077498fcdd0d7509284b5bd8dc7c0c4241217c4b8e1c2c4254733ab708cf5abf43294385afec1a4695df249b09fc187cf818b56e042a41cda2d95bc5cfa2921daba0a37be22f0f7c45e64b983a63cf01232f63899d3c23aa06dd949e8e5e83e0f5bc54ce8cc88fcbd3f0083073aaa754f78c171f471dc6efa67d456eb6a2e37bd6c07f6fdb3e5a0bef9348866aadddfb2de5c3e88883331f9fdc1f4e77875191abca9785b8d0166e6ec08de9d7cac0ea42b6f8cf74711b2609b568f2813e61086c0db595c4276e04462a2820fb8b235948e41f52c7c32f1fc47ecd155b2212ff0fdf4d9c1d0e0d68285acc1275c5bd01b74dbef584c89c796b587dcc704a89a7f5cc57dc54e3f0b9b7814d64d2536d2e63e7b6f289a7b0813202a13104756d757ef94cebf290dba59a79ee678e7b68558784c040763a25cb1bf7d8ee5c70cddc4199efcdfe0dbf1ff1d299623593b80c0b8062cbf82bd8b0fa17a2bbe990f572459ea7c39ed6e331ead0dc0ee9e27a3b531452089622ecdc99948b12519d7718e09e5a2a67d58e08c8ce3698db50472e0f6d67704c1e362ecbd7c76e74b6dcadc25bbfa0d83ec5084b7c0250f0006ac3cb70635be97bf7d6d5fb5fca8419f8f504bc53ca3170e9c23ac209b0529d113ba5262514902a173c37a89b8e9ae0ee511db1065adc6b461f2c7a6e035c109c5ed1df8d65b86c583c0c059169feb784120e32e506320ce2e3ef92a24a8fab9dd0b53d1","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
