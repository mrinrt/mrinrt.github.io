<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"926b0a50d29209e9e8a5aba4e7630dbf1b3f255f5d44b487237774876d5033afbc3456c1385e3a96e458db2f080c764c1873af1ca2afa6b6d5d259e8e7f8718c80d8604c453b0e017f643b6bbe1629209a2f7a7e878daa6133713765820a917c0ef8f3595909daa7016abef2e99f770debb1859a0d08d9a1d45b5e4e545ac0b31e2929ac30e71d0759b09cde9e341c5f467cf3a1353d9d6b150eeb6e98427866beca744cbca7c36e2c5bae9fc5bd52aac66e0d83870148209f5344681460165d791eb383ad54f35ca0d300d5fc6678a7ed70cb968edc6ea3caf3ac633c7ee6876dad561ba1bdd64c5b3db9eec144b13532ae842fcc34e81f8b05db5718584a83ba27beab785ad775d9fd7c1ff0a0af1d68c29766b1d58ca0f8c4a706597ae56882f9954066d45b784aab61295ee27182e619f6b95fa6acb407a96de5346e72321e4e88337af1a12599c4fc86b29860ee32d79f5879223349def7096ffe5ba95a53cc45b0c829ec324fb0040350614bac236e723c73646b0ce7af79e0e11c70bd4c6a6ebc7a4fbc9c642cd775dc2056c683ceb59b5e24ba3254028541688ec8406d8bb09072786d3ebfcc4e2d90a58336a8da3d7081cd0248483ab1d914694090cf2654bb79bdbdc615aab6915fc93cb74e8e44bca8b9c927063f2d1bf0490d1f38a813e166861f6305bed89208e418ab4f6240aa9095bb9cff8156c8c393ca55df3e94b25ec41f770a7a8fa3d4e6932ed998666f2998b4dba6b9c502a8c5195eafe9c322ade860daba422ea180847d1a111159a1994b3048ba1614332143e6251c29f12a869f6da06b57f9e2c1f023559dae94110c3a5821d8a3ccfaa055f7b16877e344f7feaf9d385867b7cf269dbaf7b06f85dfd4bc69b8d60798f70f76a0491497a3c26f669137494bceff424e7302c8bd15d8d5a32512aa4a9230bb4821eddc9db765e316af518d98f01a8fae21a5e3768d779ba1a103030198e139f5feee60b0036341f64fb978ecebdeb66de8385e38fb865353c83adca1ef4c0c113378d4713d7eaa086810277a6184fad81dac03e6018e1db53bd60b4772eb4bbb44bc61bb4483f9344cdeb2dc738a124dd628f5711883db7d88bc17d48a8b1644b8a5eb12d266c77b14911d465866f4418cd105e240b756a3698212228e4a8c909ca33cd66ca291d47cef82596fee1485f79957efbac6197ade41306507a3bd6887e274487babba6660ca867dd0ea05101a71774393ce5e8c6141bc9d529c991c6cbfe4d09a3e2b31c694b10ae4c9ed377b829cf3fe35826214935da6d40ec5d5efbedf3abbc1b1590908212e461f510a2ad64fb0f2a0da0c6f931fe3f7552b41bf54dac38bc60bb0c9618535ac35dbfdcd5b7cc2b447879b81f4004525e9dd1c48dfbc86bac00e3b3e467388428e99b1e5251e375885d1c2b6304101b46a8dd63e9284b190a08b4bac4255212882d51c4d3670cf719e6b4bd4d03ed43c5fa5223580dbac6476fc960bd08803a39cee44dbd9d7947cac10525e043d0a00549284ce19ba1350e47a0b639ede0e814fd61535002f77d0da7b04b9d8b946e759cbddd7199b03a42881b8369bf5ab289e49b815fb8c7fd9d76195bd957551338a778bae0a86589784c1f69e24201d0d797ffccc46ff0d76cad857e6593ca93ace2be981352cc233484778b3a43666e9fe91363a07c64a25741a1b14e4179700bc0b7048366b863672342ac6365c001a565e41a7e175fd52b6a0cc8020f058232832a22f175fbd200821516ec56db06f3753564491b9a5133d830d919077b6fb6c398ff0ba88649210b52a2c8578b490c99c0dac75ec2d748381fcba02506920c8859e85874840439e58ae2670362b8d03ef3560677d9e22f520afd7568aa867fea935775675fd1f031c1d330bc8adea05d1f643a5e11a90a7f43a523e8db74e364846fdf0685e2d41dfd311a3cfe240ce046dae573041e4448756560ad7192746a34e37476c0ea38b67306dc2eb51b2f6a8f14927b6d98abcc0a1c4a1e884681fc4c6eb0f9568b3f8ecdbc728fcfe3370786025f4d1f4bf3d0f49f9930b6030f4ad6dda4fa6a687871b38c3c6888a7d6530647147e72727e3ce6242ce952963811cd751f14b1ee36a6ad845b30ffbbaf729f7e5d28a80465fc610e92e2b7dbbb8ac56110368ed89c4da232f37b973de102ca248c90e4b27a17ed4c70493e95ff4b61197fe31560a03cb9786ebd2d9d8f7506dee1e5e15b7bd9ad4f5f0ae5de5975bdcc7b1154e9379caf5ba87a43a5e554fefc11f8525a69aa46f3a1aaca9298fd5141d6f277feeab3d8d60e76ea2df53df7582d4b2b41578cc8aa1080c1146b2fa7977dac0e5260c8cdaeeb526684608313606155ccc7f13efe8265cebb705a96c7416e6292d6c300daa475daae96100c6b06a7d8f8b69819271597b8fc46e2d79f78e4faa85b1213ce73f5aa23901fdb78e6e1de44c70317f522f097bd6ecbdc2dbcc2709cc80a58ec319a945a0326e099385fc693268d5b58170604f7635b95b8a3cbf7854b7f57e23f6544bf8bad8fafeff5c5a9a1ad05fd157e9bea7d2accdabf0da849458e9e6f6f5d57d73f2d0b796f571f5b736633b137e57b92f752a4861617b4448b27bea93a35c81c8e26b6102a879ff4041dc22399f20e906fcfa4241656468f01113d23a6a320ff787d2fd8b07ce8a29acc56153ebc24c933d12f24521d5a9cf10ba7809405455fca832ae34c9fc1d1c7590f8482e4a54f60d8b203204df6c5f6f9d2a90401711c9e65be77c961231ad670831eb8c95cbab7180b1dee497cbfd111c76ef1053888e78192ff6ceda0ffcd603bb1899386743798c4330020442b5182a081ee168b05b6559a29f1f259c785d6699d6b8f4ac4ce8622457cb5e084c9a308a0f3c4c7e344323da5b8ea49aef967f756c8eb2fdb4f0f0d1bcf063ff7f1127436514e2725f9b1ee90288937db718fd6d4551cb4cf0f060134cf7c4d7833e24fc0297a8dc8537ad17ffb447acd20362ea8e2d309c61a35b26c5ecefe5ae09e660e12870965cd93973fb472fdd3d49a869342beb4937b52ece9e24b18a12b9ee7cb0a59b241429935a9c61a16a13f3f38e4e2c36fe279ac31ba1741227ca4bb40e9791654ce7d0877309eeaffadd18be1aa2979ce5da4dcc8fc956a1c02e08a7512241e684e8199d04c391fc0640270ac62ef4285001210d8f5d6427fe5e0be93996a56e51068e032e551e6df8254dcd867b7b37e46c109cb9aca6860291f76bc0c98155ba627debdc6ccc77fa77697c4fc7ea985078a25158092d9bc5f28e487085246b929d19c671ed6c5609f97d232c320171c8b04402ed98e40ca4c23e15de321ab6441d70ab6d1f8f9413d023ad2326255919b03a419b9cecf38bf14a4f1fff32ea8217894b73448849e9915c2b820330e4f918003eb6e61e1cb685b1799aa678b5591a21ff143107aad3f146abec3a6190b8c9b58979f57cae4f6d9760b45a4b8d1560956436c35a9b612e72ec0495add1339fab4769de978d59c8468188447a9db88f268fe9f0b47bdbf8ed7d23550840c4c1928056f3e2c69092d449373a9c7ef4436e6dad3a3ec50d7c499dcb5e1aa95bb1b555a8f44c9d4742f32a8a7697cbd8fe0f02624a810c7a6ee552f5ba12334206704949fa6c77056ada31fa4a4dfabdff9877caf38c5789ac201952e73ecf8fc3519ee38dd26d77df9f45f7655a1522fa99725df27c8009926604971350c1c9033b2b426fdbf438d7e9e3d3aac906faf465ea8a4ba0a2ce75fa05b479590bcef1f1e5aac638d6abe6885a922ebe6a28a3f1e7068174a82f399ba48c7fb6981798be0e6a487c2cd224aff16a73f73d0ebdefb6e194171ba1ed1b100252a586e0ba283510e1c17d7acc78ccaeb54a739422b2a1a76636e4bf960d198813ec40c561c65444549347a583677cde79691dfaa5a98e0e1a034eb0dea65ca702afc0605d4ad682e13e03716a4eb133a3b5e44443540d50fd63420d4213bc3487068c629568a0d2e3a27096a485697abd93ba72c784d50b56265c9afaca23ac50bc2b900e472750f5837a949228f2497705afc9e6d2e1696429ae2c6fb7db6f5157611cb60c8045413095a78fb9ac7059bbfac6a3500f6c2047dc99c0d0536311d8991efbf70dbf91cf80a7dd113c5e5d928d10d491bbd8d4bd8758c44cc9140fa0d458159c00bc1bcfdfa76d1858f2cb05b797883d3a90c27f589a501867563886bda09484348cb48d37d724f6353b329074dc2abd3dd6391d6146957b2f49c382e086459c05e520a54a266bd738b0db4c7d8333dccbbbb25f72d9e394f1e3de93508aa92e003349bb44d99337d8def2a137c4bc4c7d81707866f8c2389227dc4b388e58fcbf4706c02a10538462b208f7299a8bd5aa42a8e38fda289e8df287cc7646721f93fc99550575d19cff561bfd3f389442021b345ba68f1a76591988cf731c76eb640d46becba1c19ce14c25db767b2effcab646128eb36cf71590fa57a50ff03febb0a4cfc04799ba5784a976fdb2b49d1eb2ac3035eedd64119636ff38dd87881ab0a2a9a97604455e651c4723874c538d7fc6e7729b6510641802b7ea38977e3fb25eb40e75bc45793cbb3c27b8fa4f0ff8b5ce85b501771794cd57dd14e4976aa847f6a5f59d2ea1a556c0b8d3e1e8453e5265c6527bcf8bb9cd727151e702d0108137a5738954c95cd06d009e4de21be7d28fc1e252dfef80cd2f2f5598bd6d8c104dadb0776cd338923b185fe47603026896f0f6ffdc96669e954bb11e03bcc4c91854f3aadf36c8ad4316c78dc7a86503187114a754562cb2178137e34b6551048e74b326cbb9c06d0ecaffd74132fbddd9fa64511fcc054e662f9b6cc47a660f4ab344af1cb7b13601d8ce80b791345c4beb86843a812133097c7338089203316f8da01c32773c8cee8043d719ac76ab122a20977004eca90ca818f9c68111eea2209491ce6cd3549c6babe3a3fb17c61812b9fcb75bd8eb900e30390051d80475be0c3bd4ff367bb71b64df59bf1e4cb9959b0f44fc050e634bf5cd000b5316d5f90b9f9ba7b9a325e50893fd2e68edbbb9f9a2f0ff380a19ed699ff8f7c53f686bb1542690c8462eeec28c3d37995533c43a11d024a352bc961e799cc691931a82fc7ba1352f2b7cfa016af01f8b53d025513db5930101cc4344580a6004d41b3668cc47a919c0e3244531b67f93ad11de572d757251af12c519f532435c3e6fd000c863b83b87425cc1073cec94c41e13ff222b3571f2f7795eab0ebb6352a056d08a5b73b89d30ca4d5ff9b4454fd9b444602c253543d6d8a1e879b11f873515defd0e5f5993bbd356bab0a2068ea8ad9cc875c9cc52847c7f964d7ac346d5dfe8d87474ffa6c6505ed6206487b486236d5d5aba928c3b3c3b61948c91cd76be6805c070eba5654ea0404e760234cf50952b8e525876a0199e03964f3487f709b014ae4284e4d18ffa5a7cfbf9cd6fff718ab745987b6a1b03e10f4ccac266dd59ca57879f33b56537c442e47689e70fe542fafb687f242e84ca79b37a71ea333a57b70c5049606f05792669c41bf4c0d015a5212660815f38e709554658f5d4a3f1998db0b33eeea40f4072917d810837bd45ea5594ddde2c726a5576709bbc1489188941c1c7868f03717525dcd4dfe2f5c409237323fd024667c51cafb5480a0c72706d181fb73466980dc7dad2a5b4d8f8809ced3ea23814c6a9adbf94d374f2b21e20f1650b8bd75e442e045dc823d3a981cf4a683a194ca9642a59ebb10dbf527c9cf0e581a910fcb074a748942544eb456a834d51962497e5c2fb89bac96da720093f157dc99d2ce56a399a5d1a2d7906b5d1348a294db652804a3a7bdab20c95a866ec86d601779f0a37afa38a425c2f8682f8672fc947c95a72490579639a43ddffdd53025e4b53cb64974739e02557fe046de8d0b021ad7220a1432104c727131c621304e74960388446a6d443d850ced95cb59e522c67e1d6b12f43d23865b42464d0e31cd2c17785ba98274258beaaddec56d7a5de32457bee407b9370c751b21a793017becc385502116512043b6c480e40f4c3842e8c05d4976df785e8294b32576a1cf7ac12a0407db79f45c4cb909cf1d9a7ed68426045252187e3922c302661f1457e6ce2ae81894b164493841bf94f3d937903698e744f1945f7b23f7a987b35a76b08adf3a0d0471e980c12943d75e1bc9dcbb83e66297f67dac7e34107b674b2c4f12a7cc2595a0bf0d129f0c06711b5aff23479d678d5af88310cfbeb0cf72c5e37a857f86d155a15c1c8ffe807cc3a0fa8a4a6355ed4846f2cc5dcaf46bf54f18150fc351da445398405d829ce686764a63049394790680b7748f905d9b5a1660be2c06493e03d22204a43c647587c83c218fc01bf097b1ece2789f5373e8b0f19d4279edc6f2d1472d005f7883db0b5a0d3998cb375d91af2a558cb9fe4be4388fdaea6c0889469a3d4484f521c29b9582f353bf346427a7b93b83abfbf188c579ccf3cbf6c87727b2701afa2e5d8604571a5e0300be69e3165cdf9f8816c151271c4d11a2a0211f2f091544f5a82a86a55002707cca24b9380c3f6535f1e45e4a8b3ca4d4249108896977e37b5cd4a0aece7f2635d832e685c693693ffcfd9c9455b9080f67a93126111d1bbbd79941fd34e83de8deb815c9653e19d5097830a6f7f4547f9be109fbe33a870ef0f471fe78a4faeeb7584f23bcb3f27e2d07197f921de905fac7a9b09fbb6c72fcb22ebc5c3426c7830a920089d8de84b58768ffd6323c4675c67ecd8d4258a650618b0daee567e24883d6a1afe2e682312a40094db6ddc8951349566e1f90f77e73e046d36be3aa13b629cbc42a56a9cd9153c95021a09eb7481d5cb85cfa275008894ef9c906acfc874359fea032dba76b237b319d92c10373957e895ebbbdb3b74482d89ce664c0712e6c21a3e1e108dfc1ee72a4a648eaf356d0c117caee120a6270e23143774e577e073d2169ddf19cde35297d427710d2fe22440af5002e37fc15fa49621b76cde020a4947eee4f85f83187c14ce048dc02d2a422eab9f0c30d95ff7fc08500a60a78e08edd67a29471175ddbd3b5741eb44ec46ad9ef70ea09020e1f3e8941fbce199e2c681a5ba34ef5cf2c0c1305dc0a1ff87999f89b9bda9ffd77354eadc07cf3fc905eeb8db6fcda7c0d47158c7cfd9a92323c358cd724776b4d104f38b54bb715b0f9cd91b8e72dfb3eeee8d3392a5ab21c03943e96694784d83372c3dfa60f3fc41904b7e11ca49d625d39063491f96c0c56c91b91617f5f5d962727d383cf48ff6ea82924dd993d3db2cb0ff9307e7bd190599ea675cbdc118048a6c06e116cd0b1130eed6eaf47e58d9177e0da4eda4243a4c304e189d8d1b67911f09b7a8ab02218003be288163a45b49f1a52da14133abfee53490178b7b7522a670b8432d792a387eeb32f2a6f57be9efb4b4df1046db01453334f4b63c56227ba72995af921b0e8776be6c421afbdcec1e59e7818d66d9be09e72af1d8cdbeb9d1df50266d7ba1954cb61d12b91ec588a3cbaf928af6970d6190a0c69754daf6bb00b0e015fa5d7a26266862645126e36b1b962e0c442e1979a4cc544e6293bcefa396d3a7cea14a3c017c4acde55770836cf2d54bf9dc9d89e953a5b8ef55ece31c1863e7149d0614ea84512ed5e2599c1f4e73acf4edacbcc3ab31035d7b9ee1ecb5e88424463bf4fa975e732d12ee43eda70b3e923cd4bae29c7eba043625fdcea191b128de1ee1b5eac5da50b3fb1d1e759bd483cdd26a9e6c2f0676de0176d2672918a3551916d007423452e02b8d0c9a405ab48c5acf892a29086bc3a5ae66e996a8ef57d31ca10d2c137670543904ef338522c573ee61412b0bcaed3ce2881f6ffcd15e0f228f5b2c3245e342ec42624f92a7aa8ffa8523ea0f19512a4267645c4b67d952658888ea34cf84aa8ba880090d4425fda9825db3aefba651a5cabebf4afcd7e4c1d8c5551edf5c2849852ba660d34bd0b5ab0abe392ca0f84ecaff3ae50dfd6a6425d38dcd6d2231a1ba71eccc57da60ce8dc3d2e078cdd4505d81fa187928a9e9edfecf69ff856cb20c9b7ae2e2a81559c3dc7ed69153399501c0c6dd64e2a3164ca47ac287f12f75835e9da30e3ebe9a2a4b6460fbec581895d61adfcc15ecc14d4f156e871a67f21a3c2c65de518a96b3028d2512c9b821c0aec53768fa6ceac2f3e0d38470dc47497a0b6bad3dcbc41005439e235c7ba89ee0dfe03b6bfbfdd79c8bf1ef3bf33eeec7eafe2c989181829048be8887a4d2b3742330174312f0c030e58c1ebde507e4c6d383a120c788d0a793f88fec6483f708c17c568dc4df6e87a66fd5504bc6f5b6d80c492c96f7cc454ed8413f730963f3fad98977ad0b5a41e539e581dd2a6a4037ff4fec2cc532f4b41a364364edc2093d1b1de6442eddb666388f27c635d4eab3300bf6eedad6e58a2bc4ba5c6ea18e965cf3d6ff3b3058d1e2d62ba09ec0ac357cc38dc555c9c7ab525d44c682436dd534e31c1073297aad8a44b3f9c9dee5ff8b6aa315da1ad5e880d1b496daf58b0f1f49e8a156f599e70de17d71391bdd1a761c7bb4896260e7c6dcf6defc071ac3dccbb69b356bd4c6d4195a4b4c2ed60a8efd1595f8f8e64f8b46ba43f005f1a154b2c91e8ef334a239955debe83d3cb70004d2e50939831d2ebe9c1dd9e954c516bf75d8ae2bcda287f4b4f30eaf105a370f2519a2cc66c66749cc04fac42369cf302723c6f0a8029bdbb9710a2e83855188804a8f9c3b3e7cbd5452f1e7cb0ee6081686693f74681be774e11a8400a4297042b21b949c167ce04523e8ebad5eed21b7cb6abc350e12a18aac776edb891b8f2a3a1d604c5777e294ed485b7b7bd81a145c88393a66572d2e6691464b19b45731ab3b996a0f4fe5acc5f4c971ed199dfa70ff271f883f6f077fcdd2a4acf3ce667882ca23996de8d40bf2e70f66cab870995537c5a27c94365406c9763119837d172ccfe1bcee76604258e1db7b361bd57f83a278d77665927f4dec76ce64c2204ef00e989dbcb064ca020a7e482ba5ea053f0608c136db074fe5edc0e1354b31e2979b94578e2d34170833f9c7fd3959a9b8780ac47086804c0f587d18aac91af78d1e4a282015e23709129433c36ce5b3bd9f955f743f55d91760c4dab48158e2e070470bb5db39a6ae5912765c6ab6dc1889d7c0ddbe7d2e152f79e23663066d2997c8be37c2badb1f2bcad08c1e1d5f5d978fff5aa1b4876d1095cb5bf5a82377104125fc8cf88921d05cafeaf80cc65291b5857621353bf3fab3c2d3f45ce9ece84a2827147018518de55fd9f02b8433f88023a7898a049c8014f049dc39672515417749791e5ac5153211434a60feda0dcce75e269c873f2bdf37e67f2bdf62febe0f32cd4ec6d033a3a993a2f4c7075959efdee49ed165cfc1ddb40b96886bfbac162e7c4a10e8095a6f2e78220dea66e1f2fbbfef3ef2dd173aef10aeeff459b289c834120c22ab8f6d8e6aaf1885a8f6a5cbbd9d39f839a3cfca33475c0f2cd031f6ff4ef3b16d9e1e50c6de325294e2119aad8f2401e45d25cc1764ac200a500306145287c9fd03a4bc18bddd98e62962f03cfd37c27bfba0971fb6e4527f395ab8772e3bd5e4dfb7944fb856875100340c2dbb26e6f5bc9d46f133c21ef28264b8f85c1d9b422b5b9b6b6043053145a64bf4b32b1077374b0d02faa634a2d3b23fc6d233917d3579c9aa011491f2e52d827c846bf7e5709ec482e2c8c38b073040e43c796a5984ab2892e96a7b54dd649b5e8f9521f943bda1954c48a5731ed6534c4d1943ba5df8a9d366136eaa246cec3e02c293a590953c8289bc791c1d759c1a290447fd019bf3c80eb7f33d206ce1e6b87cf594f0a80f94ec6c9207decb411ee93a5287ae1a708fab6979459d4fc23c62d0c91b253290eb0e02aef287cce4a445cc24e5e4a5c7658ec3883267c351d091c9120308d5c47638d9e1d52ddd259b8f2a0b07eff64fd582dfea29584cc21bb9208ddf4876de8aa5073869c623802b8a5ad0b96d903f3ecd3743c0574f29bfefbd3fd2b2af7eb0a47042dba3e5a85ce71cc1f2c764102f52cb604d52461feba999c762b506f11b91c4dd567dc5fd968d1cda3bcc9cfbf221c6a76a121d1c897eb3bb208b1c749e9070b65101f15274d7b880ecef22cbb2e1da5037b5b3a9b9deeb52bc0c6817a4d43a580ed06623b5c3a2b5c47c1bcbaa2a0e9e0417e3da355d0c571e8e2a7d9df94a2a0dc6db85d96550ed1c5ef75caa5aa1353cff39082f7896ec96d62d7516cd7a869af5e9a6eaddb5c90f80357fd5571b6c787757127800067c6e6bdaf9559dda6e6cb79aa15835bdfb89dba8066dd28d5ceb1d5b564941f749dfc104196ee778ab0f36c21af462dcc65d789f064e74d7e4b7b8d5f9def4417c282c10d31ce8eea8e3f93fd009492845a70fe69197cdc61c52024d1cc9f04f6dc89bca1338df3b057a26aa8ae3232594defd7a4943e3b7ba686261b983b39fd94f830f3c828a9066e131b43fe8a488216f7bcdc4de34e158ddbf5e30a827e01148bc1c20e57456244ae3d54851e8bd2c5e3f5bc671f9242f7ec6f5d8b2979100a609f75feeb6bcedabd8fa16d2ae511c6af40b68788f4cfc06a13efe276de0c7a90deae98c7ce29363f0b77dc56c7bdc2c9aa7347ec63b9927a95f985f08ce22b69e3c833a14b70712162374b7f754d286353dceb2a1adf36a583d7183939b721bc97823d13f451d29872b313107413cd66d84df8982ec92a4feb55c5f6040af8376d9037a11ee1432193281409ffb4b170d030ae8e657ca1ee378483ebac6a6532ba1b35bd5a69cef900aadddf065c5740f7072c4ac8f906cec1f9a88fcafc012401150d48eab85b6f32b0921c5d8f0ffa460b96acf8648dc845aac9d25679d5c58bb203ba608d94e2e73dd6eb9284eedc6e4b9a0da7378d61e71a13945abc0f383fbb0720f9660dfd12c1b218a8566f2c052fd87ebd0935a61f1b03ef2048c39d6121d5deb35df11feef63efa09d67917638cd0fce3f53fe7a46af6e8ff82c51195dbacb68f208e616bb50e96c4ac91cd8be3b3c440fb673492425ec9e59ad2f212eb2d4f784ac8f74c6baed19074031b22e71de6c0e3332ab70783aa85e8f91ec0183b06dad266a897acc23701efa39b521084e993df7ebffe294c26b8f5060f2e45b3fb71dbeed831b25c92570ed011276ae9045461957597ff5abfa753404c10a53388c5dcaf3290a4e6e77c5aa200fded9aa19aae33d618fabdd77ce14202be412b9820bedc6ec1de33692d698edafe9ef312fdc565628bab87cbaf52d2bab08522fc14d773c4f16fbb2ebebacd3b4073b571268a65bebf64fc8518fb969e7a5cae931ef36dfa7150806573835621db3bd4edead2d9e5084894577270591907baf301b19e89f32d3004c9d53208b18c629de1b456e186769beb19f53898ed9f9d72dab5eb427501c4f2c4d889757a87b4623b435cfd51517468a9a5fed4ceea2abd56017b7b0598dd049fba775102df56469223fa55b42749cd9323a0a4970b2c40771bd74a1ebbd6388ea03f7eee3822f97b7922e716c58722fb79ec9c3d9be220b904d1b1fcb4f3fcadc7659e3e9b44fdb64ed4a41bbd3990f5492c658db9d65de4dd3bdd932e5ddf0a6c2136fcb4aa19994feb134af0c512a7c3a4a771eb43d43421bcf80429b4d8686b1859506c4927df8aa94d0a878b004c4e936c61262521d727820bcf2ea0e195ded66f1459666ec1e6e5e80a8778a2e33e05f8122a63338b09817c1c8aad0d8aba9dd3638dbafb62a2470d2cb59c0766db8fa1db94aab70f305d784101b5f526d97d6fb91ce4315123134e4ee8ad6a0fe3b9fa65d099ab49ba3bdd4154db756455a65ee49147c173a315d5baf05034da01d43a2ef78fff01ca5eb9537ce69fea413e3fc0026399b4b63b58f59c3d7c865dd5e20fa89e605753cf44ad94aec5e4c59fa4b0201a323112ea7440c22bdae39becd36b3ab961331c263beabd6fe074f9c0539f0507dc442edbd2c2ebec7ea9b22fc5e71383b4b15451deda367624062b0eafa16ebf50e01324c74adf6e7c82969de88717d2c691032a6080af3908921811fbe6fbf37840f1730fa698235014026413a13f97c9be053f7caa1327b79a63477ae5abda55a582611d77cc1778aea1d44bc1f5e5da07798265d52e79ef3394fd71b5f1ee643af5ef713744075b16ad22fc99f9d068da8680377ab055770adb9389f7259e992b557328c958bbc84a7d45dd9e4f6a7121cd686794f6cd9c0f1b40d43543e68d8297b39c45994fe1d06a17080e338c05d8af60721c8a003d20ecce71783485fbe867c5adc15720b39df36edadaa28f113df49ecf827475fa2b6cb3cf10834aafe610a97187b37adc1dc5d6be58a65674d194df0e42c616dab3a64da904ccac7314daa0da559e80c3b36f88280770e7bc841043e0d9e1fd6a873b33f8b2931d2316db4ca0ce08bccb5b04ac2938bc6de192fe05e80b44c49813844075c645931cb3fdd5ad82b5fa850aca60eccb4ad5f69a855c12948e4b5f7d04e72805d5584487436388901a7a831245dd87b140a13dd030a87a14e1c49789e25c0d5fca49c1fbeff7adf76329a3b061f0c0798a3e518a5df1cacb2cadbdd0272187c06b8852a326a71654f1f93cad17f7c7d43ebd265152f39186b9ca6c377dfe0e44f34e43828f76cdfe9e76da000f1d7189eae96187bed2fa8408422a1303072326bed46073a2ee40b9dd695b4d69c6c95a5bc185c4c11877b4c78c6487b60888e95ca20a93a7d76be964800ba00473dbe5827c71862bd66b093c8af6c1939c390034a0132cd61fd650fb0396e1abb09c24b3c73ee262b74373aaefeb321a9d9c96390a7f4c7b19dddd48f4dfcc2964c8f90bc4b01847439eaab05ca5ac12c51f3fbbcb8f3fdfbe3a5ad0fdfdeec5832b534801d9731b00bc3f0de6698cb5d289ec5c888615d9cc2310620b31132a4a560956f8cdc5541467b44416c19c9b212db4aa2dbc99baf8814c4c22cf293a69dde642595e7a0ed4e10ab0e9155b7c9db7cdd5ffcfb106d40efad2ce40023a97b8f3c4bf4ce199f58ac4fcc35724ebc199fea0e57e0b35cea0a5179af72f73890d1436c3b405d61b6e36aa9852b3642f79550ef4e66a6fb4f897ef80d18495c2075de955496c3bf197ce45cc26ed89bf91da02e64183a1629007599a62d5b9479ded50b7ae876270ed7741539b4b2131d1e650717f796daf7c3d22ca4cec47c49438a05b1b973a9569d771fd77aa4a0ca440cfb2eb7da3eb8a6e6ce5652d14fd93834934bc0d3c84f688f2fb00a45414ebda17d20b3348556383504d3b840de5e35b3fa7409fdf9653d28c878a4db34898065a7fea4fc4613fa928671dd56692d5444c91e6f9c6fc4bce98e0bedd0fd7331207b3861b923ae44d78852a0800ec892cdbd5b0da7fb0df7fa699b26165ef6f078bb434903fe21d0d813996b534d98a094901ae082768db66ed1f88f0bf6178ef431f68fdf8cc435955ba2f9022275d36000633a71cae45990f54902d4188b0445cf80d3e91dab8bfc41dc6795c2bb87e5f7b1989a6d969b910221a039057f34843b127de8303a2444e4b9a2eb80019174d152b43a39eb3229eb820ff3e629fd304cd1824087bf2d65cbb9eb95bb54217c44728de111c69fea1172550ac6e16de8fe7e852f3ea5442073058038bc5005e410764c6b0c61aa3b0876b321980d217a4ceda27d03e0cdd17f556d89066b62d4f17d548c2687407424db7e09e29980ce6263306f907bd5ab2eec2917715fe9e45f8e65b7d15134c68ad9e5f9666925cccf949a0965eb7cf59e4a81f37fd84dafc51e382b328412754d2b1073aaf75b4ca182c73dfc79aa3ca8aed95a86fec552349043258b4149d8d95fe1b0c5c9fae46315446592e5e9cbe1d215f3119bd0adcb4191a24bbc0433e283e6f53c47460b42b23917b589adb8d4f67d222a395153ae1b875314d74e39b275a30a91108e56768dcd86d8298561aa14ac88616e023814c2f47d96c694b9fd37fa8ecda0abddb8da19c581a789ee8b53bbb1e195a7d2a9f149aa0f2eeffff833f9d19e7367f55bc97d14cdb04e68e982536270ab0f7a681cd8046e54d08238e59e8cb75a703aec63b1ffbda5b7c72cbef6d5d8d39dc44ef10a4623d841788a34753e4930c8c7e45cfc648a2bcec8cb50b86ea1d3fa7f769c42de1f4565ad3f719da58a6f8f65b037c318bc7da87b0f04f6af186261ca38ba2d4dfa9d204b6d41c627cae6c5ec47ed7e762a6cde7343451b91828b8f5bff4e4d659d38652691540e65b45c2abefa768bfb42608c9619a1ee63a0fdda5a01a80692146b156a447e545e1454f9fa342d77db2cdfdd1abc8a956b1cc9ae5ef530ce3550b7198adda9cc0ccd9487a7e8bb48f2d35b22c284dc364705d39a72d02def64cc42067b1ab0d97f857989e32cd286462850fe807088ad8e5f0aa6ddd42da9f4b185037d998ff7864d2c1ab8150f5ffd0346a0d3fcf79849e6db38c30a9ceafc17cb7cccd8b58a4799b827ecf1adb8c28bf12e8b8d57d72df0bd7993dbeef4a1f4af46a87f02d59d919b7573148852517be0059106ca3e300ec77a923fafee740a26a00369d63bff41a4e99818f5c247c25a3a823779f9048f0e3fc8aac63dcc55dd220f6ffe7e87911acc3e31d0e2cd3fa36b490fd1e4267e69432dc5a84053db2183046a01fe6024f5443a313dac64fd0d55803a09d10f6ba01dc8c88d4f0f9973280d4c3bc2d67abfe89710d937cdd87f7aa85083c670cb45e6738501923f1242794f094454584c928ddf6452aad6b641c8764d930cdf7f8833e6cd2a5b245bb68f9b64094e8e581f17993204fde35b43c91cced19e88b2efd83d31ff1369dc7984a5d05f3a95d305d537bc6552b10696a602f9cc05574fa0112b781ff0eb31761796e6380cbad34e79c237c6bccd85203dfdbdd40c582efc19a3a6c635f86dbdff7550efb9d0ca958301009c796e4ab2966f3a29f2bf49364179b889820a7ba1bd4d3bfa3ba5e56eb4640a58af7a87522dfb7a9932c674293305d90e3b7c9e79e42ba5cb5b68edbb87aa502173c2cb87758bdb4e44f99e0b7b331dd2114a0a5d127c5a4bac9b57d28c91a28d9fd9a173b80cf80733088878ab3d096c9c2222a26f7b19f3ec3d47a2703953197635d36d8e8620b7e6dd192bd444a5cbdb93fdda9cb9782310c11c6d9a34dcc8e6223a951b6b66951182275ac259dcbb7c8fb75c2cf929ee52ee56c2796d02c316d09a0ee7e3325574fd1ef1738c9cfac01cd41e1ec96fb3a30752de2fb8bd9f6ddf4520e5924df67f4dc4c643545fa1a35fb2b1354f04eac5b945da886be7186a7159a6b1e32dd3436cccea15a02548a4b8ee0fbe271dbc26d83b2214660c66cd510426d57778fd2cf0986f32c9824e72cfbdfacbb4a38efbdad92f234f63b6fc9e8cfab7c68b43413c3dee652cb2d54f54af9d467c5c96142ed0561a54bf5329f7890e741d756d9b4e04927e5d202fd1008c3a640ccf39da03e3fea9dd028dd63c197bc4511eebdf438124946fde9ad4ab768414596be99d31ffc996b447b9025a77429cf8974fa4fe51e3a2e527860aff1d30b6f2d1d0a91818dac279f62477913811d2b865d4386e432ea640b41eb771d8883c72ecc7ac686c5123f65ab1bbf727c10614de5797fd5704a795df37767a86719806c64de4bd3fd669cc6bff52604cb72e231aae1f34836e74d6e524ea5e01f8f0e28de5e31acd1ed9cf33400103f5f7cac2ff36ad143a076fe959af5cbe808ba0e3eecf1aa9ebcaa9f8391384500ec8f4519c8cde5574fc8c8813969bb528e7b5cb56f0861a95e1173f6d9cbdec5e4b2b0fa1fee2caf18dd99a6c7c3f6186f12cc2021f9df333a5d2216502f619525bb4297a25840f54d0d457830e18e8c5062c9a1071fb84eee00958255fb596bf04d38d4c8f83e6183b64019ca191893c1a2e4f83fef367e5fb6d829f2c5a6df27e6b43618ad36100d4833737398c865fca00305ad294f8ea48803a3f4aa09f8d3b36de909290663f2eeac7109f28526125f5c40a9a6ed53f9143ad23eb7f8b4b259a2a6d7bc6ebe4e047528a4f56592254ef49fe002bf9c64d1688ee8e3ea23934b34a7a3b23042486d71377f7b1c071719476d6167b356f35f81867905cd6a478a6576d565ddd6513c3827122bd93abd03a9a831174b8fcf4b798b92922aa7a3aa2f065054b1a27d83efcef6fd29477fc6029dfc5801d0fe9aaefd812e4d7e795307c8352ef82fa82af44eb75e7db05704580ba124d837b3adcb20a77223e05ec7924daf1c35077a7006677386e0e70ae9db8e41d9c29216227163215f962846ee4ed049b8fa3c4254fb6164428c87035ebe1ddabdc19bbd2e6888a410995bca10410e7bf584914f3e4f7e2c41316eda615a8c44cc75ed8bea6311f6c1957d5fdd7a4071fccfe329689af6d152f9f6331f38b13e257f1ac313c8e18608514c87c4409cf71d3a7d1044c03c4017df080d5f6bfbb883cd3f5d0dddb1b7662d1c5e4ad8f1b9df94c510a7bdbac26004af48d120ca4ddf33008306dc231692e37a43edc4d265656e47049a76d3bd05ee3f0cbb355bcbcec1a3eafbf3c0d5095c4ed862898786767d4251cab96965c16c3f1715022b3b99d820fc278376637b2ff7d3fbaf9e6c02a0a5482279affe17ae8a7e6cdb48e0b91f5e1059d7c5137bd3b864c3cc30b90f86562468a5daefdfe0857b6f55c104191896a01bf4a5f777904a5818a1d5ee1a39ecf017561b0901764e8c5caa9afb8d4cfc5d8859ac3da8326fd21603a24fbe492ec0a4a678811fa19af129f7c0fb0468fe5665de332bf361dc160da754cb6a78e8c970baba20de54b3cf8fe9f26307154662f45fa555211676e5deca1be326e1455099655001058f0fa62a00063512a4f6071b3cc9db94b2d3a0c7018671c1b442f64fc4ab3ec9021b1b10097d37fc7d570458eca0b2d188730ec263dcd1b8b0600843f23854e0e144b40c10e96d7280e5d50adce11737565b8bb2dd7736012d7bd59e9c9e22f725c4bb1be6167e0c3992d6ab8a5519c5de616ddd7035aa1e2c39a612c5ed79ea946b7eb9c476cb4127c44125fd8b09be55944819c72c5545698597adac6f38303b58f76707e5052ef6c68464b4f1acf2064dfc5f1f64f170b585f2112917adc7a57d9fa67550cdbf3f07c537ecc53d5a0b011d86192ff8aec27ab0a127c5e5453ed2ea529750b0b9439c77ffc02aa577942d556932b66cc22a3fae91812a8435a7a5f915303ad89b36b48961a51535ca04cfe94aed0665c281de1f1d50b7ca7ad171de30ee380bf69ea467280097535fc6f3353a62bcffb69b9c301edcbb07e0333eb91e97cdc928af31c5ba881d23dd476d6dc24cb4ab701cc78d4bb35e52541c8071ed76f34a64b06b0816299f4a912d36cf7999f44368707298811aedbbd68667938e02ac1a23daf7483c99c35c886896520f73b42e24b6f0a39694ad196070bf0aac07568a8d7606dc14f5a442e2510d177ee00d958e21b03dcf64b24d2cb62895c9789d8b672d435f3869b50ded186e45e7e10634b300c6366ee89909512127150432b28b81aed867cb0e72361b64bd26ac938b81792e0ac0cb6e59cbad285a30bc1bfd12c53c23607fab92699f272d89b0f98f8771cf6e9d7759f51d6eb13057c2375a8933aea949aa57425a7a1f7c4baabd9604a9dae33939ac8746eb18b443a9e05bd3994576bdc9c514759ef3dadab080b930b83e524d172f046c25c07a3fd2952b02f57712092a582e265e7cb961fa8419146503d7e0724b7c3b937f65020adf08f2ead1ed46dc11c0b514563d6cb68ec1b1b315a5c508d1edd944f9786d0ca98f8674716e43b68acd08c9a693437207b08a2785de9c934e8a496221e217e63bb723def9feba85336608dc41145e9abd7bc2c7c3d4dd32eb8fcb6c37069dfa842916b21aa21e1202cc6ca52f0a90d9803712d6327017656a4160cbd284a93136cd9f459581963089dbe09c6dc449192fe4212","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
